var Dr=Object.defineProperty,Fr=Object.defineProperties;var Mr=Object.getOwnPropertyDescriptors;var sr=Object.getOwnPropertySymbols;var Or=Object.prototype.hasOwnProperty,Tr=Object.prototype.propertyIsEnumerable;var or=(a,l,h)=>l in a?Dr(a,l,{enumerable:!0,configurable:!0,writable:!0,value:h}):a[l]=h,P=(a,l)=>{for(var h in l||(l={}))Or.call(l,h)&&or(a,h,l[h]);if(sr)for(var h of sr(l))Tr.call(l,h)&&or(a,h,l[h]);return a},$=(a,l)=>Fr(a,Mr(l));var N=(a,l,h)=>new Promise((w,f)=>{var o=y=>{try{i(h.next(y))}catch(C){f(C)}},b=y=>{try{i(h.throw(y))}catch(C){f(C)}},i=y=>y.done?w(y.value):Promise.resolve(y.value).then(o,b);i((h=h.apply(a,l)).next())});import{c as _r,j as e,S as Lr,C as Pr,T as pr,a as Br,b as br,B as r,d as we,P as j,e as q,f as ke,g as t,F as Ue,I as He,h as Ge,M as Q,i as T,A as We,k as p,l as ge,L as Er,u as qe,m as Je,G as ie,n as $r,o as Ur,p as Hr,q as Gr,r as Nr,s as Ne,t as Y,v as ir,w as ar,x as jr,y as me,z as ve,D as ye,E as Te,H as Vr,J as Yr,K as Oe,N as _e,R as le,O as Pe,Q as lr,U as de,V as ce,W as xe,X as V,Y as s,Z as he,_ as qr,$ as G,a0 as U,a1 as Jr,a2 as Kr,a3 as Ve,a4 as Se,a5 as Xr,a6 as mr,a7 as vr,a8 as yr,a9 as Sr,aa as kr,ab as ae,ac as Ce,ad as Qr,ae as Zr,af as Be,ag as et,ah as rt,ai as tt,aj as I,ak as Fe,al as Cr,am as wr,an as dr,ao as cr,ap as Ee,aq as xr,ar as nt,as as st,at as ot,au as it,av as hr,aw as at,ax as lt,ay as gr,az as dt,aA as ct,aB as xt,aC as ht,aD as gt}from"./mui-zmqEllzL.js";import{c as ft,a as Wr,r as c}from"./vendor-B1Kjdn4M.js";import{a as M}from"./axios-ok5IlGam.js";import{c as ze}from"./utils-CvWlWUpv.js";(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const f of document.querySelectorAll('link[rel="modulepreload"]'))w(f);new MutationObserver(f=>{for(const o of f)if(o.type==="childList")for(const b of o.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&w(b)}).observe(document,{childList:!0,subtree:!0});function h(f){const o={};return f.integrity&&(o.integrity=f.integrity),f.referrerPolicy&&(o.referrerPolicy=f.referrerPolicy),f.crossOrigin==="use-credentials"?o.credentials="include":f.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function w(f){if(f.ep)return;f.ep=!0;const o=h(f);fetch(f.href,o)}})();var Ye={},fr=ft;Ye.createRoot=fr.createRoot,Ye.hydrateRoot=fr.hydrateRoot;const ut=_r({key:"rtl",prepend:!0}),pt=({children:a})=>(Wr.useEffect(()=>{document.documentElement.dir="rtl",document.documentElement.lang="fa",document.title="سیستم آپلود فایل معلم";const l=document.querySelector('meta[name="viewport"]');l&&l.setAttribute("content","width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no")},[]),e.jsx(Lr,{injectFirst:!0,children:e.jsx(Pr,{value:ut,children:a})})),zr=c.createContext(),Le=()=>{const a=c.useContext(zr);if(!a)throw new Error("useThemeDesign must be used within a ThemeDesignProvider");return a},bt=()=>br({direction:"rtl",palette:{primary:{main:"#1976d2",light:"#42a5f5",dark:"#1565c0",contrastText:"#ffffff"},secondary:{main:"#dc004e",light:"#ff5983",dark:"#9a0036",contrastText:"#ffffff"},background:{default:"#fafafa",paper:"#ffffff"},text:{primary:"#212121",secondary:"#757575"},grey:{50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121"},success:{main:"#4caf50"},warning:{main:"#ff9800"},error:{main:"#f44336"},info:{main:"#2196f3"}},typography:{fontFamily:["Vazirmatn","Vazirmatn VF","Vazirmatn-Light","Vazirmatn-Medium","Vazirmatn-Bold","IRANSans","IRANSans-web","IRANSansX","Tahoma","Arial","sans-serif"].join(","),fontSize:16,h1:{fontSize:"2.75rem",fontWeight:700,lineHeight:1.2,letterSpacing:"-0.02em"},h2:{fontSize:"2.25rem",fontWeight:700,lineHeight:1.3,letterSpacing:"-0.01em"},h3:{fontSize:"1.9rem",fontWeight:600,lineHeight:1.3},h4:{fontSize:"1.6rem",fontWeight:600,lineHeight:1.4},h5:{fontSize:"1.35rem",fontWeight:600,lineHeight:1.4},h6:{fontSize:"1.2rem",fontWeight:600,lineHeight:1.5},body1:{fontSize:"1.1rem",lineHeight:1.6},body2:{fontSize:"0.95rem",lineHeight:1.6},button:{fontSize:"1.1rem",fontWeight:600,textTransform:"none",letterSpacing:"0.02em"},caption:{fontSize:"0.8rem",lineHeight:1.4}},spacing:8,shape:{borderRadius:12},components:{MuiCssBaseline:{styleOverrides:{body:{fontFamily:["Vazirmatn","Vazirmatn VF","IRANSans","IRANSans-web","IRANSansX","Tahoma","Arial","sans-serif"].join(","),direction:"rtl",textAlign:"right",fontFeatureSettings:'"liga" 1, "kern" 1',WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale"},html:{direction:"rtl"},'*[dir="rtl"]':{direction:"rtl"}}},MuiButton:{styleOverrides:{root:{borderRadius:12,padding:"12px 24px",fontSize:"1rem",fontWeight:600,textTransform:"none",boxShadow:"none","&:hover":{boxShadow:"0 4px 8px rgba(0,0,0,0.12)"}},contained:{boxShadow:"0 2px 4px rgba(0,0,0,0.1)","&:hover":{boxShadow:"0 6px 12px rgba(0,0,0,0.15)"}}}},MuiTextField:{styleOverrides:{root:{"& .MuiOutlinedInput-root":{borderRadius:12,"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"#1976d2",borderWidth:"2px"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"#1976d2",borderWidth:"2px"}}}}},MuiCard:{styleOverrides:{root:{borderRadius:16,boxShadow:"0 4px 12px rgba(0,0,0,0.08)","&:hover":{boxShadow:"0 8px 24px rgba(0,0,0,0.12)",transform:"translateY(-2px)"},transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"}}},MuiPaper:{styleOverrides:{root:{borderRadius:16},elevation1:{boxShadow:"0 2px 4px rgba(0,0,0,0.08)"},elevation2:{boxShadow:"0 4px 8px rgba(0,0,0,0.12)"},elevation3:{boxShadow:"0 8px 16px rgba(0,0,0,0.16)"}}},MuiAppBar:{styleOverrides:{root:{backgroundColor:"#1976d2",boxShadow:"0 2px 8px rgba(25, 118, 210, 0.2)"}}},MuiDrawer:{styleOverrides:{paper:{borderRadius:0,backgroundColor:"#ffffff",borderRight:"1px solid rgba(0,0,0,0.08)"}}},MuiListItem:{styleOverrides:{root:{borderRadius:8,margin:"4px 8px","&.Mui-selected":{backgroundColor:"rgba(25, 118, 210, 0.08)","&:hover":{backgroundColor:"rgba(25, 118, 210, 0.12)"}}}}},MuiTableHead:{styleOverrides:{root:{backgroundColor:"#f8f9fa","& .MuiTableCell-head":{fontWeight:600,color:"#424242",borderBottom:"2px solid #e0e0e0"}}}},MuiTableCell:{styleOverrides:{root:{padding:"16px 24px",borderBottom:"1px solid #f0f0f0"}}},MuiChip:{styleOverrides:{root:{borderRadius:8,fontWeight:500}}},MuiDialog:{styleOverrides:{paper:{borderRadius:16}}},MuiDialogTitle:{styleOverrides:{root:{fontSize:"1.25rem",fontWeight:600,color:"#212121",padding:"24px 24px 16px 24px"}}},MuiDialogContent:{styleOverrides:{root:{padding:"16px 24px"}}},MuiDialogActions:{styleOverrides:{root:{padding:"16px 24px 24px 24px",gap:"8px"}}}}}),ur=({children:a})=>{const l=c.useMemo(()=>bt(),[]),h=c.useMemo(()=>({theme:l,isRTL:!0,direction:"rtl"}),[l]);return e.jsx(zr.Provider,{value:h,children:e.jsxs(pr,{theme:l,children:[e.jsx(pt,{}),e.jsx(Br,{}),a]})})},jt=ze.apiBaseUrl,$e=[{value:"0",label:"پیش‌دبستانی",color:"#fff8e1"},{value:"1",label:"پایه اول",color:"#e3f2fd"},{value:"2",label:"پایه دوم",color:"#f3e5f5"},{value:"3",label:"پایه سوم",color:"#fff3e0"},{value:"4",label:"پایه چهارم",color:"#e8f5e8"},{value:"5",label:"پایه پنجم",color:"#fce4ec"},{value:"6",label:"پایه ششم",color:"#f1f8e9"},{value:"7",label:"پایه هفتم",color:"#e0f2f1"}];function mt({onLogin:a}){const{isRTL:l}=Le(),[h,w]=c.useState(""),[f,o]=c.useState(!1),[b,i]=c.useState(""),y=u=>{w(u.target.value),b&&i("")},C=u=>N(this,null,function*(){var v,_;if(u.preventDefault(),o(!0),i(""),!h){i("پایه تحصیلی الزامی است"),o(!1);return}try{const g=yield M.post(`${jt}/login/`,{grade:parseInt(h,10)});g.data.success?a(g.data):i(g.data.error||"اطلاعات ورودی صحیح نیست")}catch(g){console.error("Login error:",g),i(((_=(v=g.response)==null?void 0:v.data)==null?void 0:_.error)||"خطا در اتصال به سرور. لطفاً مجدداً تلاش کنید.")}finally{o(!1)}}),S=$e.find(u=>u.value===h),A="grade-select-label";return e.jsx(r,{sx:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #667eea 0%, #764ba2 25%, #f093fb 50%, #f5576c 75%, #4facfe 100%)",backgroundSize:"400% 400%",animation:"gradientShift 15s ease infinite","@keyframes gradientShift":{"0%":{backgroundPosition:"0% 50%"},"50%":{backgroundPosition:"100% 50%"},"100%":{backgroundPosition:"0% 50%"}},padding:{xs:2,sm:3,md:4}},children:e.jsx(we,{maxWidth:"sm",children:e.jsx(j,{elevation:24,sx:{borderRadius:{xs:4,sm:6,md:8},overflow:"hidden",background:"rgba(255, 255, 255, 0.96)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.2)",position:"relative","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:"6px",background:"linear-gradient(90deg, #1976d2, #42a5f5, #f093fb, #f5576c)",borderRadius:"8px 8px 0 0"}},children:e.jsxs(q,{sx:{p:{xs:4,sm:5,md:6}},children:[e.jsxs(r,{textAlign:"center",mb:5,children:[e.jsx(r,{sx:{width:{xs:80,sm:100,md:120},height:{xs:80,sm:100,md:120},borderRadius:"50%",background:"linear-gradient(135deg, #1976d2 0%, #42a5f5 100%)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 24px auto",boxShadow:"0 12px 40px rgba(25, 118, 210, 0.4)"},children:e.jsx(ke,{sx:{fontSize:{xs:36,sm:42,md:48},color:"white"}})}),e.jsx(t,{variant:"h3",component:"h1",sx:{fontWeight:800,background:"linear-gradient(135deg, #1976d2 0%, #42a5f5 100%)",backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",mb:2,fontSize:{xs:"1.75rem",sm:"2.25rem",md:"2.5rem"}},children:"سیستم آپلود فایل معلم"}),e.jsx(t,{variant:"h6",sx:{color:"#666",fontWeight:500,mb:1,fontSize:{xs:"1rem",sm:"1.1rem"}},children:"لطفاً پایه تحصیلی خود را انتخاب کنید"}),e.jsx(t,{variant:"body2",sx:{color:"#999"},children:"بدون نیاز به شماره تماس یا رمز عبور"})]}),e.jsx("form",{onSubmit:C,children:e.jsxs(r,{sx:{display:"flex",flexDirection:"column",gap:4},children:[e.jsxs(Ue,{fullWidth:!0,sx:{"& .MuiOutlinedInput-root":{borderRadius:4},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"#1976d2",borderWidth:"2px"}},children:[e.jsx(He,{id:A,sx:{fontSize:"1.1rem",fontWeight:500},children:"پایه تحصیلی"}),e.jsx(Ge,{labelId:A,name:"grade",value:h,onChange:y,label:"پایه تحصیلی",renderValue:u=>{if(!u)return"";const v=$e.find(_=>_.value===u);return e.jsx(r,{sx:{display:"flex",alignItems:"center",gap:2},children:e.jsx(T,{label:v==null?void 0:v.label,size:"small",sx:{backgroundColor:v==null?void 0:v.color,color:"#333",fontWeight:600,fontSize:"0.9rem"}})})},sx:{fontSize:"1.1rem","& .MuiSelect-select":{padding:"18px 16px"}},children:$e.map(u=>e.jsx(Q,{value:u.value,children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:2,width:"100%"},children:[e.jsx(r,{sx:{width:12,height:12,borderRadius:"50%",backgroundColor:u.color,border:"2px solid rgba(0,0,0,0.1)"}}),e.jsx(t,{variant:"body1",sx:{fontWeight:500},children:u.label})]})},u.value))})]}),S&&e.jsxs(j,{elevation:0,sx:{p:2,borderRadius:3,backgroundColor:S.color,border:"1px solid rgba(0,0,0,0.05)"},children:[e.jsxs(t,{variant:"subtitle1",sx:{fontWeight:600},children:["پایه انتخاب شده: ",S.label]}),e.jsx(t,{variant:"body2",sx:{color:"#555"},children:"پس از ورود می‌توانید فایل‌های مربوط به این پایه را مدیریت کنید."})]}),b&&e.jsx(We,{severity:"error",sx:{borderRadius:3,fontSize:"1rem"},children:b}),e.jsx(p,{type:"submit",fullWidth:!0,variant:"contained",size:"large",disabled:f,startIcon:f?e.jsx(ge,{size:20,color:"inherit"}):e.jsx(Er,{}),sx:{mt:1,py:2,borderRadius:4,fontSize:{xs:"1rem",sm:"1.1rem"},fontWeight:700,textTransform:"none",background:"linear-gradient(135deg, #1976d2 0%, #42a5f5 100%)",boxShadow:"0 8px 32px rgba(25, 118, 210, 0.4)","&:hover":{background:"linear-gradient(135deg, #1565c0 0%, #1976d2 100%)",boxShadow:"0 12px 40px rgba(25, 118, 210, 0.5)",transform:"translateY(-2px)"},"&:active":{transform:"translateY(0)"},transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},children:f?"در حال ورود...":"ورود به سیستم"}),e.jsx(r,{textAlign:"center",children:e.jsx(t,{variant:"body2",sx:{color:"#666",fontSize:"0.9rem"},children:"برای ورود به پنل مدیریت از دکمه مخصوص مدیران در صفحه استفاده کنید."})})]})})]})})})})}const vt=ze.apiBaseUrl,ne=[{label:"انتخاب فایل",description:"فایل مورد نظر خود را انتخاب کنید",icon:e.jsx(Ne,{})},{label:"مشخصات",description:"توضیحات و تنظیمات چاپ را وارد کنید",icon:e.jsx(Te,{})},{label:"تایید",description:"بررسی نهایی و ارسال فایل",icon:e.jsx(Yr,{})}],yt=[{value:"A4",label:"A4",description:"سایز استاندارد"},{value:"A5",label:"A5",description:"سایز کوچک"}];function St({user:a,onNavigate:l,onLogout:h}){var pe;const w=qe();Je(w.breakpoints.down("md"));const{isRTL:f}=Le(),[o,b]=c.useState(0),[i,y]=c.useState({file:null,description:"",pages:"",paper_size:"A4",duplex:"0"}),[C,S]=c.useState(!1),[A,u]=c.useState(""),[v,_]=c.useState(!1),[g,D]=c.useState(0),[H,O]=c.useState(!1),m=c.useRef(null),B=d=>{const z=d.target.files[0];z&&(y($(P({},i),{file:z})),z.type==="application/pdf"?_(!0):(_(!1),y(J=>$(P({},J),{pages:""}))),o===0&&b(1))},E=d=>{d.preventDefault(),d.stopPropagation(),d.type==="dragenter"||d.type==="dragover"?O(!0):d.type==="dragleave"&&O(!1)},Z=d=>{if(d.preventDefault(),d.stopPropagation(),O(!1),d.dataTransfer.files&&d.dataTransfer.files[0]){const z=d.dataTransfer.files[0];y($(P({},i),{file:z})),z.type==="application/pdf"?_(!0):(_(!1),y(J=>$(P({},J),{pages:""}))),o===0&&b(1)}},K=d=>{y($(P({},i),{[d.target.name]:d.target.value}))},fe=()=>{b(d=>d+1)},ue=()=>{b(d=>d-1)},ee=()=>N(this,null,function*(){var d,z,J;if(!i.file){u("لطفاً فایل را انتخاب کنید");return}S(!0),u("");try{const R=new FormData;R.append("file",i.file),R.append("user_id",a.id),R.append("description",i.description),R.append("paper_size",i.paper_size),R.append("duplex",i.duplex),v&&R.append("pages",i.pages),D(10),(yield M.post(`${vt}/upload/`,R,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:k=>{const W=Math.round(k.loaded*100/k.total);D(W)}})).data.success?(u("فایل با موفقیت آپلود شد"),D(100),setTimeout(()=>{l("myfiles")},2e3)):u("خطا در آپلود فایل")}catch(R){if(console.error("Upload error:",R),((d=R.response)==null?void 0:d.status)===401){h();return}(J=(z=R.response)==null?void 0:z.data)!=null&&J.error?u(R.response.data.error):u("خطا در اتصال به سرور")}finally{S(!1)}}),Ie=d=>{if(d===0)return"0 Bytes";const z=1024,J=["Bytes","KB","MB","GB"],R=Math.floor(Math.log(d)/Math.log(z));return parseFloat((d/Math.pow(z,R)).toFixed(2))+" "+J[R]};return a?e.jsx(r,{sx:{minHeight:"100vh",background:"linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)",padding:{xs:2,sm:3,md:4},direction:"rtl"},children:e.jsxs(we,{maxWidth:"md",children:[e.jsx(j,{elevation:8,sx:{borderRadius:4,overflow:"hidden",background:"linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%)",border:"1px solid rgba(0,0,0,0.05)",mb:4},children:e.jsxs(q,{sx:{p:4},children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:3,flexWrap:"wrap",gap:2},children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(r,{sx:{width:60,height:60,borderRadius:"50%",background:"linear-gradient(135deg, #1976d2 0%, #42a5f5 100%)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 8px 32px rgba(25, 118, 210, 0.3)"},children:e.jsx(ke,{sx:{fontSize:28,color:"white"}})}),e.jsxs(r,{children:[e.jsx(t,{variant:"h4",sx:{fontWeight:700,color:"#1976d2",mb:.5},children:"آپلود فایل"}),e.jsxs(t,{variant:"h6",color:"text.secondary",children:[a==null?void 0:a.name," - پایه ",a==null?void 0:a.grade]})]})]}),e.jsxs(r,{sx:{display:"flex",gap:2},children:[e.jsx(p,{variant:"outlined",onClick:()=>l("myfiles"),startIcon:e.jsx(ie,{}),sx:{borderRadius:3,fontWeight:600,borderColor:"#1976d2",color:"#1976d2","&:hover":{backgroundColor:"#1976d2",color:"white"}},children:"فایل‌های من"}),e.jsx(p,{variant:"contained",color:"error",onClick:h,startIcon:e.jsx($r,{}),sx:{borderRadius:3,fontWeight:600,backgroundColor:"#f44336","&:hover":{backgroundColor:"#d32f2f"}},children:"خروج"})]})]}),e.jsx(Ur,{activeStep:o,orientation:"horizontal",sx:{mb:4},children:ne.map((d,z)=>e.jsx(Hr,{children:e.jsx(Gr,{sx:{"& .MuiStepLabel-label":{fontWeight:600,fontSize:"1rem"}},children:d.label})},d.label))})]})}),e.jsx(j,{elevation:8,sx:{borderRadius:4,overflow:"hidden",background:"rgba(255, 255, 255, 0.96)",backdropFilter:"blur(20px)",border:"1px solid rgba(0,0,0,0.05)"},children:e.jsxs(q,{sx:{p:{xs:3,sm:4,md:5}},children:[o===0&&e.jsxs(r,{children:[e.jsx(t,{variant:"h5",sx:{fontWeight:600,mb:3,textAlign:"center"},children:ne[0].label}),e.jsx(t,{variant:"body1",color:"text.secondary",sx:{mb:4,textAlign:"center"},children:ne[0].description}),e.jsxs(r,{onDragEnter:E,onDragLeave:E,onDragOver:E,onDrop:Z,onClick:()=>{var d;return(d=m.current)==null?void 0:d.click()},sx:{border:"3px dashed",borderColor:H?"#1976d2":"#ddd",borderRadius:4,p:{xs:4,sm:6,md:8},textAlign:"center",backgroundColor:H?"#e3f2fd":"#fafafa",cursor:"pointer",transition:"all 0.3s ease","&:hover":{borderColor:"#1976d2",backgroundColor:"#f5f5f5"}},children:[e.jsx(Nr,{sx:{fontSize:64,color:"#1976d2",mb:2}}),e.jsx(t,{variant:"h6",sx:{fontWeight:600,mb:1},children:"فایل را اینجا رها کنید یا کلیک کنید"}),e.jsx(t,{variant:"body2",color:"text.secondary",children:"فرمت‌های مجاز: PDF, JPG, PNG, TXT (حداکثر 50MB)"})]}),e.jsx("input",{ref:m,type:"file",accept:".pdf,.jpg,.jpeg,.png,.txt",onChange:B,style:{display:"none"}}),i.file&&e.jsx(j,{elevation:4,sx:{mt:3,p:3,borderRadius:3,backgroundColor:"#f8f9fa",border:"1px solid #e9ecef"},children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(Ne,{sx:{fontSize:32,color:"#1976d2"}}),e.jsxs(r,{sx:{flexGrow:1},children:[e.jsx(t,{variant:"h6",sx:{fontWeight:600},children:i.file.name}),e.jsxs(t,{variant:"body2",color:"text.secondary",children:[Ie(i.file.size)," - ",i.file.type]})]}),e.jsx(T,{label:"فایل انتخاب شد",color:"success",sx:{fontWeight:600}})]})})]}),o===1&&e.jsxs(r,{children:[e.jsx(t,{variant:"h5",sx:{fontWeight:600,mb:3,textAlign:"center"},children:ne[1].label}),e.jsx(t,{variant:"body1",color:"text.secondary",sx:{mb:4,textAlign:"center"},children:ne[1].description}),e.jsxs(r,{sx:{display:"flex",flexDirection:"column",gap:4},children:[e.jsx(Y,{fullWidth:!0,label:"توضیحات",name:"description",multiline:!0,rows:4,value:i.description,onChange:K,variant:"outlined",placeholder:"توضیحات فایل را وارد کنید...",sx:{"& .MuiOutlinedInput-root":{borderRadius:3}}}),v&&e.jsx(Y,{fullWidth:!0,label:"شماره صفحات",name:"pages",value:i.pages,onChange:K,variant:"outlined",placeholder:"مثال: 1-3,5",helperText:"برای PDF‌ها، شماره صفحات مورد نظر را وارد کنید",sx:{"& .MuiOutlinedInput-root":{borderRadius:3}}}),e.jsxs(r,{sx:{display:"flex",gap:3,flexWrap:"wrap"},children:[e.jsxs(Ue,{sx:{minWidth:200,flexGrow:1},children:[e.jsx(He,{sx:{fontWeight:600},children:"اندازه کاغذ"}),e.jsx(Ge,{name:"paper_size",value:i.paper_size,onChange:K,label:"اندازه کاغذ",sx:{borderRadius:3},children:yt.map(d=>e.jsx(Q,{value:d.value,children:e.jsxs(r,{children:[e.jsx(t,{variant:"body1",sx:{fontWeight:600},children:d.label}),e.jsx(t,{variant:"body2",color:"text.secondary",children:d.description})]})},d.value))})]}),e.jsxs(Ue,{sx:{minWidth:200,flexGrow:1},children:[e.jsx(He,{sx:{fontWeight:600},children:"نوع چاپ"}),e.jsxs(Ge,{name:"duplex",value:i.duplex,onChange:K,label:"نوع چاپ",sx:{borderRadius:3},children:[e.jsx(Q,{value:"0",children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(ir,{sx:{color:"#666"}}),e.jsx(t,{children:"یک طرف"})]})}),e.jsx(Q,{value:"1",children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(ar,{sx:{color:"#1976d2"}}),e.jsx(t,{children:"پشت و رو"})]})})]})]})]})]})]}),o===2&&e.jsxs(r,{children:[e.jsx(t,{variant:"h5",sx:{fontWeight:600,mb:3,textAlign:"center"},children:ne[2].label}),e.jsx(t,{variant:"body1",color:"text.secondary",sx:{mb:4,textAlign:"center"},children:ne[2].description}),e.jsxs(j,{elevation:4,sx:{p:4,borderRadius:3,backgroundColor:"#f8f9fa",border:"1px solid #e9ecef",mb:4},children:[e.jsx(t,{variant:"h6",sx:{fontWeight:600,mb:3},children:"بررسی اطلاعات فایل"}),e.jsxs(jr,{sx:{p:0},children:[e.jsxs(me,{sx:{px:0,py:1},children:[e.jsx(ve,{children:e.jsx(Ne,{sx:{color:"#1976d2"}})}),e.jsx(ye,{primary:"نام فایل",secondary:(pe=i.file)==null?void 0:pe.name})]}),e.jsxs(me,{sx:{px:0,py:1},children:[e.jsx(ve,{children:e.jsx(Te,{sx:{color:"#1976d2"}})}),e.jsx(ye,{primary:"توضیحات",secondary:i.description||"بدون توضیح"})]}),e.jsxs(me,{sx:{px:0,py:1},children:[e.jsx(ve,{children:e.jsx(ar,{sx:{color:"#1976d2"}})}),e.jsx(ye,{primary:"تنظیمات",secondary:`کاغذ ${i.paper_size} - ${i.duplex==="1"?"پشت و رو":"یک طرف"}`})]}),v&&i.pages&&e.jsxs(me,{sx:{px:0,py:1},children:[e.jsx(ve,{children:e.jsx(ir,{sx:{color:"#1976d2"}})}),e.jsx(ye,{primary:"صفحات مورد نظر",secondary:i.pages})]})]})]}),C&&e.jsxs(r,{sx:{mb:3},children:[e.jsx(Vr,{variant:"determinate",value:g,sx:{height:8,borderRadius:4,backgroundColor:"#e0e0e0","& .MuiLinearProgress-bar":{borderRadius:4,background:"linear-gradient(90deg, #1976d2, #42a5f5)"}}}),e.jsxs(t,{variant:"body2",sx:{mt:1,textAlign:"center"},children:["در حال آپلود... ",g,"%"]})]}),A&&e.jsx(We,{severity:A.includes("موفقیت")?"success":"error",sx:{mb:3,borderRadius:3,fontSize:"1rem"},children:A})]}),e.jsxs(r,{sx:{display:"flex",justifyContent:"space-between",mt:4},children:[e.jsx(p,{disabled:o===0,onClick:ue,sx:{borderRadius:3,px:4,py:1.5,fontWeight:600},children:"قبلی"}),o===ne.length-1?e.jsx(p,{variant:"contained",onClick:ee,disabled:C,sx:{borderRadius:3,px:4,py:1.5,fontWeight:600,background:"linear-gradient(135deg, #1976d2 0%, #42a5f5 100%)","&:hover":{background:"linear-gradient(135deg, #1565c0 0%, #1976d2 100%)"}},children:C?"در حال آپلود...":"آپلود فایل"}):e.jsx(p,{variant:"contained",onClick:fe,disabled:o===0&&!i.file,sx:{borderRadius:3,px:4,py:1.5,fontWeight:600,background:"linear-gradient(135deg, #1976d2 0%, #42a5f5 100%)","&:hover":{background:"linear-gradient(135deg, #1565c0 0%, #1976d2 100%)"}},children:"بعدی"})]})]})})]})}):e.jsx(r,{sx:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)",direction:"rtl"},children:e.jsxs(j,{sx:{p:4,borderRadius:4},children:[e.jsx(t,{variant:"h6",sx:{fontWeight:600},children:"برای آپلود فایل ابتدا وارد حساب کاربری شوید."}),e.jsx(p,{sx:{mt:2},variant:"contained",onClick:h,children:"بازگشت به صفحه ورود"})]})})}const Me=ze.apiBaseUrl;function kt({user:a,onNavigate:l,onLogout:h}){const w=qe(),f=Je(w.breakpoints.down("md")),{isRTL:o}=Le(),[b,i]=c.useState([]),[y,C]=c.useState(!0),[S,A]=c.useState(null),[u,v]=c.useState({description:"",pages:"",paper_size:"A4",duplex:"0"}),[_,g]=c.useState(!1),[D,H]=c.useState(null),[O,m]=c.useState({open:!1,message:"",severity:"success"}),[B,E]=c.useState({});c.useEffect(()=>{a!=null&&a.id&&Z()},[a]);const Z=()=>N(this,null,function*(){var x;if(a)try{C(!0);const k=yield M.get(`${Me}/my_uploads/`);i(k.data)}catch(k){if(console.error("Error loading files:",k),((x=k.response)==null?void 0:x.status)===401){h();return}d("خطا در بارگذاری فایل‌ها","error")}finally{C(!1)}}),K=x=>N(this,null,function*(){var k;try{E(Ke=>$(P({},Ke),{[x.id]:!0}));const W=yield M.get(`${Me}/download_file/${x.id}/`,{responseType:"blob"}),re=window.URL.createObjectURL(new Blob([W.data])),X=document.createElement("a");X.href=re,X.setAttribute("download",x.filename),document.body.appendChild(X),X.click(),X.remove(),window.URL.revokeObjectURL(re),d("فایل با موفقیت دانلود شد","success")}catch(W){if(console.error("Download error:",W),((k=W.response)==null?void 0:k.status)===401){h();return}d("خطا در دانلود فایل","error")}finally{E(W=>$(P({},W),{[x.id]:!1}))}}),fe=()=>N(this,null,function*(){var x;if(D)try{yield M.post(`${Me}/delete_upload/`,{id:D.id}),i(b.filter(k=>k.id!==D.id)),g(!1),H(null),d("فایل با موفقیت حذف شد","success")}catch(k){if(console.error("Delete error:",k),((x=k.response)==null?void 0:x.status)===401){h();return}d("خطا در حذف فایل","error")}}),ue=x=>{A(x.id),v({description:x.description||"",pages:x.pages||"",paper_size:x.paper_size,duplex:x.duplex.toString()})},ee=x=>N(this,null,function*(){var k;x.preventDefault();try{yield M.post(`${Me}/edit_upload/`,$(P({id:S},u),{duplex:parseInt(u.duplex)})),i(b.map(W=>W.id===S?$(P(P({},W),u),{duplex:parseInt(u.duplex)}):W)),A(null),d("فایل با موفقیت ویرایش شد","success")}catch(W){if(console.error("Edit error:",W),((k=W.response)==null?void 0:k.status)===401){h();return}d("خطا در ویرایش فایل","error")}}),Ie=x=>{v($(P({},u),{[x.target.name]:x.target.value}))},pe=()=>{A(null)},d=(x,k="success")=>{m({open:!0,message:x,severity:k})},z=()=>{m($(P({},O),{open:!1}))},J=x=>new Date(x).toLocaleDateString("fa-IR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),R=x=>{if(x===0)return"0 Bytes";const k=1024,W=["Bytes","KB","MB","GB"],re=Math.floor(Math.log(x)/Math.log(k));return parseFloat((x/Math.pow(k,re)).toFixed(2))+" "+W[re]};return a?y?e.jsx(r,{sx:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)"},children:e.jsx(ge,{size:60,sx:{color:"#1976d2"}})}):e.jsx(r,{sx:{minHeight:"100vh",background:"linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)",padding:{xs:2,sm:3,md:4},direction:"rtl"},children:e.jsxs(we,{maxWidth:"lg",children:[e.jsx(j,{elevation:8,sx:{borderRadius:4,overflow:"hidden",background:"linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%)",border:"1px solid rgba(0,0,0,0.05)",mb:4},children:e.jsx(q,{sx:{p:4},children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:3,flexWrap:"wrap",gap:2},children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(Oe,{sx:{width:60,height:60,background:"linear-gradient(135deg, #1976d2 0%, #42a5f5 100%)",boxShadow:"0 8px 32px rgba(25, 118, 210, 0.3)"},children:e.jsx(_e,{sx:{fontSize:28,color:"white"}})}),e.jsxs(r,{children:[e.jsx(t,{variant:"h4",sx:{fontWeight:700,color:"#1976d2",mb:.5},children:"فایل‌های من"}),e.jsxs(t,{variant:"h6",color:"text.secondary",children:[a==null?void 0:a.name," - پایه ",a==null?void 0:a.grade]}),e.jsxs(t,{variant:"body2",color:"text.secondary",children:[b.length," فایل آپلود شده"]})]})]}),e.jsxs(r,{sx:{display:"flex",gap:2,flexWrap:"wrap"},children:[e.jsx(p,{variant:"outlined",onClick:Z,startIcon:e.jsx(le,{}),sx:{borderRadius:3,fontWeight:600,borderColor:"#1976d2",color:"#1976d2","&:hover":{backgroundColor:"#1976d2",color:"white"}},children:"بروزرسانی"}),e.jsx(p,{variant:"contained",onClick:()=>l("upload"),startIcon:e.jsx(Pe,{}),sx:{borderRadius:3,fontWeight:600,background:"linear-gradient(135deg, #1976d2 0%, #42a5f5 100%)","&:hover":{background:"linear-gradient(135deg, #1565c0 0%, #1976d2 100%)"}},children:"آپلود جدید"}),e.jsx(p,{variant:"outlined",onClick:h,sx:{borderRadius:3,fontWeight:600,borderColor:"#dc004e",color:"#dc004e","&:hover":{backgroundColor:"#dc004e",color:"white"}},children:"خروج"})]})]})})}),e.jsx(j,{elevation:8,sx:{borderRadius:4,overflow:"hidden",background:"rgba(255, 255, 255, 0.96)",backdropFilter:"blur(20px)",border:"1px solid rgba(0,0,0,0.05)"},children:b.length===0?e.jsxs(q,{sx:{p:8,textAlign:"center"},children:[e.jsx(r,{sx:{width:120,height:120,borderRadius:"50%",background:"linear-gradient(135deg, #f5f5f5 0%, #e0e0e0 100%)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 24px auto"},children:e.jsx(lr,{sx:{fontSize:60,color:"#999"}})}),e.jsx(t,{variant:"h5",sx:{fontWeight:600,mb:2},children:"هنوز فایلی آپلود نکرده‌اید"}),e.jsx(t,{variant:"body1",color:"text.secondary",sx:{mb:3},children:"برای شروع، اولین فایل خود را آپلود کنید"}),e.jsx(p,{variant:"contained",size:"large",onClick:()=>l("upload"),startIcon:e.jsx(Pe,{}),sx:{borderRadius:3,px:4,py:2,fontWeight:600,fontSize:"1.1rem",background:"linear-gradient(135deg, #1976d2 0%, #42a5f5 100%)","&:hover":{background:"linear-gradient(135deg, #1565c0 0%, #1976d2 100%)"}},children:"آپلود اولین فایل"})]}):e.jsx(de,{children:e.jsxs(ce,{children:[e.jsx(xe,{children:e.jsxs(V,{children:[e.jsx(s,{sx:{fontWeight:700,fontSize:"1rem"},children:"نام فایل"}),e.jsx(s,{sx:{fontWeight:700,fontSize:"1rem"},children:"توضیحات"}),e.jsx(s,{sx:{fontWeight:700,fontSize:"1rem"},children:"تنظیمات چاپ"}),e.jsx(s,{sx:{fontWeight:700,fontSize:"1rem"},children:"تاریخ"}),e.jsx(s,{sx:{fontWeight:700,fontSize:"1rem",textAlign:"center"},children:"عملیات"})]})}),e.jsx(he,{children:b.map(x=>e.jsxs(V,{sx:{"&:hover":{backgroundColor:"#f8f9fa"}},children:[e.jsx(s,{children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(r,{sx:{width:40,height:40,borderRadius:"8px",background:"linear-gradient(135deg, #1976d2 0%, #42a5f5 100%)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(lr,{sx:{fontSize:20,color:"white"}})}),e.jsxs(r,{children:[e.jsx(t,{variant:"body1",sx:{fontWeight:600},children:x.filename}),e.jsx(t,{variant:"body2",color:"text.secondary",children:R(x.file_size||0)})]})]})}),e.jsx(s,{children:S===x.id?e.jsx(Y,{fullWidth:!0,name:"description",value:u.description,onChange:Ie,variant:"outlined",size:"small",placeholder:"توضیحات...",sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}}):e.jsx(t,{variant:"body2",children:x.description||"-"})}),e.jsx(s,{children:e.jsxs(r,{sx:{display:"flex",flexDirection:"column",gap:1},children:[e.jsx(T,{label:`کاغذ ${x.paper_size}`,size:"small",color:"primary",variant:"outlined"}),e.jsx(T,{label:x.duplex?"پشت و رو":"یک طرف",size:"small",color:x.duplex?"secondary":"default"}),x.pages&&e.jsx(T,{label:`صفحات: ${x.pages}`,size:"small",variant:"outlined"})]})}),e.jsx(s,{children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(qr,{sx:{fontSize:16,color:"#666"}}),e.jsx(t,{variant:"body2",children:J(x.created_at)})]})}),e.jsx(s,{children:e.jsxs(r,{sx:{display:"flex",gap:1,justifyContent:"center"},children:[e.jsx(G,{title:"دانلود",children:e.jsx(U,{onClick:()=>K(x),disabled:B[x.id],sx:{backgroundColor:"#e3f2fd",color:"#1976d2","&:hover":{backgroundColor:"#1976d2",color:"white"}},children:B[x.id]?e.jsx(ge,{size:20}):e.jsx(ie,{})})}),S===x.id?e.jsxs(e.Fragment,{children:[e.jsx(G,{title:"ذخیره",children:e.jsx(U,{onClick:ee,sx:{backgroundColor:"#e8f5e8",color:"#4caf50","&:hover":{backgroundColor:"#4caf50",color:"white"}},children:e.jsx(Jr,{})})}),e.jsx(G,{title:"لغو",children:e.jsx(U,{onClick:pe,sx:{backgroundColor:"#fce4ec",color:"#e91e63","&:hover":{backgroundColor:"#e91e63",color:"white"}},children:e.jsx(Kr,{})})})]}):e.jsxs(e.Fragment,{children:[e.jsx(G,{title:"ویرایش",children:e.jsx(U,{onClick:()=>ue(x),sx:{backgroundColor:"#fff3e0",color:"#ff9800","&:hover":{backgroundColor:"#ff9800",color:"white"}},children:e.jsx(Ve,{})})}),e.jsx(G,{title:"حذف",children:e.jsx(U,{onClick:()=>{H(x),g(!0)},sx:{backgroundColor:"#ffebee",color:"#f44336","&:hover":{backgroundColor:"#f44336",color:"white"}},children:e.jsx(Se,{})})})]})]})})]},x.id))})]})})}),f&&e.jsx(Xr,{color:"primary","aria-label":"آپلود",onClick:()=>l("upload"),sx:{position:"fixed",bottom:24,left:24,background:"linear-gradient(135deg, #1976d2 0%, #42a5f5 100%)","&:hover":{background:"linear-gradient(135deg, #1565c0 0%, #1976d2 100%)"}},children:e.jsx(Pe,{})}),e.jsxs(mr,{open:_,onClose:()=>g(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsx(vr,{sx:{fontWeight:700,fontSize:"1.25rem"},children:"تایید حذف فایل"}),e.jsx(yr,{children:e.jsxs(t,{variant:"body1",children:["آیا مطمئن هستید که می‌خواهید فایل ",e.jsx("strong",{children:D==null?void 0:D.filename})," را حذف کنید؟",e.jsx("br",{}),"این عمل قابل بازگشت نیست."]})}),e.jsxs(Sr,{children:[e.jsx(p,{onClick:()=>g(!1),sx:{fontWeight:600},children:"لغو"}),e.jsx(p,{onClick:fe,variant:"contained",color:"error",sx:{fontWeight:600},children:"حذف"})]})]}),e.jsx(kr,{open:O.open,autoHideDuration:6e3,onClose:z,anchorOrigin:{vertical:"top",horizontal:"center"},children:e.jsx(We,{onClose:z,severity:O.severity,sx:{width:"100%",fontSize:"1rem"},children:O.message})})]})}):e.jsx(r,{sx:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)"},children:e.jsxs(j,{sx:{p:4,borderRadius:4},children:[e.jsx(t,{variant:"h6",sx:{fontWeight:600},children:"لطفاً ابتدا وارد حساب کاربری شوید."}),e.jsx(p,{sx:{mt:2},variant:"contained",onClick:h,children:"بازگشت به صفحه ورود"})]})})}const Ct=ze.apiBaseUrl,wt=br({direction:"rtl",typography:{fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif'},palette:{primary:{main:"#1a237e"},secondary:{main:"#dc004e"},background:{default:"#f5f5f5"}}});function Wt({onAdminLogin:a}){const[l,h]=c.useState({phone:"",password:""}),[w,f]=c.useState(!1),[o,b]=c.useState(""),i=C=>{h($(P({},l),{[C.target.name]:C.target.value}))},y=C=>N(this,null,function*(){if(C.preventDefault(),f(!0),b(""),!l.phone||!l.password){b("شماره تماس و رمز عبور الزامی است"),f(!1);return}try{const S=yield M.post(`${Ct}/admin_login/`,{phone:l.phone,password:l.password});S.data.success?a(S.data):b(S.data.error||"شماره تماس یا رمز عبور اشتباه است")}catch(S){console.error("Admin login error:",S),b("خطا در اتصال به سرور")}finally{f(!1)}});return e.jsx(pr,{theme:wt,children:e.jsx(r,{sx:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #1a237e 0%, #3f51b5 100%)",padding:3},children:e.jsx(we,{maxWidth:"sm",children:e.jsx(j,{elevation:16,sx:{borderRadius:4,overflow:"hidden",background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)"},children:e.jsxs(q,{sx:{p:4},children:[e.jsxs(r,{textAlign:"center",mb:4,children:[e.jsx(r,{sx:{width:80,height:80,borderRadius:"50%",background:"linear-gradient(135deg, #1a237e 0%, #3f51b5 100%)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 24px auto",boxShadow:"0 8px 32px rgba(26, 35, 126, 0.3)"},children:e.jsx(ae,{sx:{fontSize:40,color:"white"}})}),e.jsx(t,{variant:"h4",component:"h1",gutterBottom:!0,sx:{fontWeight:"bold",color:"#1a237e",mb:2},children:"پنل مدیریت"}),e.jsx(t,{variant:"subtitle1",color:"text.secondary",sx:{mb:1},children:"ورود ایمن برای مدیران سیستم"})]}),e.jsx("form",{onSubmit:y,children:e.jsxs(r,{sx:{display:"flex",flexDirection:"column",gap:3},children:[e.jsx(Y,{fullWidth:!0,label:"شماره تماس",name:"phone",type:"tel",value:l.phone,onChange:i,required:!0,variant:"outlined",placeholder:"۰۹۱۲۳۴۵۶۷۸۹",InputProps:{startAdornment:e.jsx(Ce,{position:"start",children:e.jsx(_e,{color:"primary"})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:3}}}),e.jsx(Y,{fullWidth:!0,label:"رمز عبور",name:"password",type:"password",value:l.password,onChange:i,required:!0,variant:"outlined",InputProps:{startAdornment:e.jsx(Ce,{position:"start",children:e.jsx(Qr,{color:"primary"})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:3}}}),o&&e.jsx(We,{severity:"error",sx:{borderRadius:3},children:o}),e.jsx(p,{type:"submit",fullWidth:!0,variant:"contained",size:"large",disabled:w,startIcon:w?e.jsx(ge,{size:20}):e.jsx(ae,{}),sx:{mt:2,py:1.5,borderRadius:3,fontSize:"1.1rem",fontWeight:"bold",textTransform:"none",background:"linear-gradient(135deg, #1a237e 0%, #3f51b5 100%)",boxShadow:"0 4px 20px rgba(26, 35, 126, 0.3)","&:hover":{background:"linear-gradient(135deg, #0d47a1 0%, #1a237e 100%)",boxShadow:"0 6px 25px rgba(26, 35, 126, 0.4)"}},children:w?"در حال ورود...":"ورود به پنل مدیریت"})]})})]})})})})})}const se=ze.apiBaseUrl,zt=[{text:"داشبورد",icon:e.jsx(dt,{}),active:!0,id:"dashboard"},{text:"آمار و تحلیل",icon:e.jsx(ct,{}),active:!1,id:"analytics"},{text:"مدیریت معلم‌ها",icon:e.jsx(Cr,{}),active:!1,id:"teachers"},{text:"مدیریت فایل‌ها",icon:e.jsx(wr,{}),active:!1,id:"files"},{text:"مدیریت مدیران",icon:e.jsx(ae,{}),active:!1,id:"admins"},{text:"تنظیمات سیستم",icon:e.jsx(xt,{}),active:!1,id:"settings"},{text:"پایگاه داده",icon:e.jsx(ht,{}),active:!1,id:"database"},{text:"گزارش‌ها",icon:e.jsx(gt,{}),active:!1,id:"logs"}];function It({onLogout:a,adminProfile:l}){const h=qe(),w=Je(h.breakpoints.down("md")),{isRTL:f}=Le(),[o,b]=c.useState(null),[i,y]=c.useState([]),[C,S]=c.useState([]),[A,u]=c.useState([]),[v,_]=c.useState([]),[g,D]=c.useState(!0),[H,O]=c.useState(!1),[m,B]=c.useState("dashboard"),[E,Z]=c.useState(""),[K,fe]=c.useState(""),[ue,ee]=c.useState(!1),[Ie,pe]=c.useState(!1),[d,z]=c.useState(null),[J,R]=c.useState(null),[x,k]=c.useState([]),[W,re]=c.useState({open:!1,message:"",severity:"success"}),[X,Ke]=c.useState({maxFileSize:50,allowedExtensions:["pdf","jpg","jpeg","png","txt"],maintenanceMode:!1,backupFrequency:"daily"}),Re=(l==null?void 0:l.full_name)||"مدیر سیستم",Ir=(Re==null?void 0:Re.charAt(0))||"م",Rr=(l==null?void 0:l.email)||"دسترسی کامل",Ae=(o==null?void 0:o.total_storage_mb)||0,Xe=Ae>=1024?`${(Ae/1024).toFixed(1)} GB`:`${Ae.toFixed(1)} MB`;c.useEffect(()=>{be()},[]);const be=()=>N(this,null,function*(){var n;try{D(!0);const L=[M.get(`${se}/admin_stats/`),M.get(`${se}/all_uploads/`),M.get(`${se}/admin_teachers/`),M.get(`${se}/admin_users/`),M.get(`${se}/activity_logs/`)],[F,je,te,tr,nr]=yield Promise.all(L);F.data.success&&b(F.data.stats),je.data.success&&y(je.data.uploads),te.data.success&&S(te.data.teachers),tr.data.success&&u(tr.data.admins),nr.data.success&&_(nr.data.logs)}catch(L){if(console.error("Error loading admin data:",L),((n=L.response)==null?void 0:n.status)===401){a();return}oe("خطا در بارگذاری داده‌ها","error")}finally{D(!1)}}),Ar=n=>N(this,null,function*(){var L;try{yield M.post(`${se}/admin/delete_teacher/`,{id:n}),S(C.filter(F=>F.id!==n)),oe("معلم با موفقیت حذف شد","success"),ee(!1),z(null)}catch(F){if(console.error("Delete teacher error:",F),((L=F.response)==null?void 0:L.status)===401){a();return}oe("خطا در حذف معلم","error")}}),Qe=n=>N(this,null,function*(){var L;try{const F=yield M.get(`${se}/download_file/${n.id}/`,{responseType:"blob"}),je=window.URL.createObjectURL(new Blob([F.data])),te=document.createElement("a");te.href=je,te.setAttribute("download",n.filename),document.body.appendChild(te),te.click(),te.remove(),window.URL.revokeObjectURL(je),oe("فایل با موفقیت دانلود شد","success")}catch(F){if(console.error("Download error:",F),((L=F.response)==null?void 0:L.status)===401){a();return}oe("خطا در دانلود فایل","error")}}),Ze=n=>N(this,null,function*(){var L;try{yield M.post(`${se}/delete_upload/`,{id:n}),y(i.filter(F=>F.id!==n)),oe("فایل با موفقیت حذف شد","success")}catch(F){if(console.error("Delete error:",F),((L=F.response)==null?void 0:L.status)===401){a();return}oe("خطا در حذف فایل","error")}}),oe=(n,L="success")=>{re({open:!0,message:n,severity:L})},er=()=>{re($(P({},W),{open:!1}))},rr=n=>new Date(n).toLocaleDateString("fa-IR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),De=i.filter(n=>n.filename.toLowerCase().includes(E.toLowerCase())||n.teacher.toLowerCase().includes(E.toLowerCase()));return g?e.jsx(r,{sx:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)"},children:e.jsxs(r,{textAlign:"center",children:[e.jsx(ge,{size:60,sx:{color:"#1a237e",mb:2}}),e.jsx(t,{variant:"h6",sx:{color:"#666"},children:"در حال بارگذاری داده‌های مدیریت..."})]})}):e.jsxs(r,{sx:{display:"flex",minHeight:"100vh",direction:"rtl"},children:[e.jsx(Zr,{position:"fixed",sx:{zIndex:h.zIndex.drawer+1,background:"linear-gradient(135deg, #1a237e 0%, #3f51b5 100%)",boxShadow:"0 4px 20px rgba(26, 35, 126, 0.3)"},children:e.jsxs(Be,{children:[e.jsx(U,{color:"inherit",edge:"start",onClick:()=>O(!H),sx:{mr:2,display:{md:"none"},backgroundColor:"rgba(255, 255, 255, 0.1)","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.2)"}},children:e.jsx(et,{})}),e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(r,{sx:{width:40,height:40,borderRadius:"50%",backgroundColor:"rgba(255, 255, 255, 0.2)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(ae,{sx:{fontSize:24}})}),e.jsx(t,{variant:"h6",noWrap:!0,component:"div",sx:{fontWeight:700,fontSize:{xs:"1.1rem",sm:"1.25rem"}},children:"پنل مدیریت سیستم"})]}),e.jsx(r,{sx:{flexGrow:1}}),e.jsx(p,{color:"inherit",onClick:a,startIcon:e.jsx(rt,{}),sx:{fontWeight:600,borderRadius:3,px:2,"&:hover":{backgroundColor:"rgba(255, 255, 255, 0.1)"}},children:"خروج از سیستم"})]})}),e.jsxs(tt,{variant:w?"temporary":"permanent",open:H,onClose:()=>O(!1),sx:{width:280,flexShrink:0,"& .MuiDrawer-paper":{width:280,boxSizing:"border-box",backgroundColor:"#ffffff",borderRight:"1px solid rgba(0,0,0,0.08)"}},children:[e.jsx(Be,{}),e.jsxs(r,{sx:{overflow:"auto",p:2},children:[e.jsx(j,{elevation:4,sx:{p:3,mb:3,borderRadius:3,background:"linear-gradient(135deg, #1a237e 0%, #3f51b5 100%)",color:"white"},children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(Oe,{sx:{width:50,height:50,backgroundColor:"rgba(255, 255, 255, 0.2)",fontWeight:700},children:Ir}),e.jsxs(r,{children:[e.jsx(t,{variant:"h6",sx:{fontWeight:700},children:Re}),e.jsx(t,{variant:"body2",sx:{opacity:.8},children:Rr})]})]})}),e.jsx(jr,{sx:{p:0},children:zt.map(n=>e.jsxs(me,{selected:m===n.id,onClick:()=>B(n.id),sx:{borderRadius:3,mb:1,cursor:"pointer","&.Mui-selected":{backgroundColor:"rgba(26, 35, 126, 0.1)","&:hover":{backgroundColor:"rgba(26, 35, 126, 0.15)"}},"&:hover":{backgroundColor:"rgba(26, 35, 126, 0.05)"}},children:[e.jsx(ve,{children:e.jsx(r,{sx:{width:40,height:40,borderRadius:"50%",backgroundColor:m===n.id?"#1a237e":"rgba(26, 35, 126, 0.1)",display:"flex",alignItems:"center",justifyContent:"center",color:m===n.id?"white":"#1a237e"},children:n.icon})}),e.jsx(ye,{primary:n.text,primaryTypographyProps:{fontWeight:600,fontSize:"1rem"}})]},n.text))})]})]}),e.jsxs(r,{component:"main",sx:{flexGrow:1,p:3},children:[e.jsx(Be,{}),e.jsxs(we,{maxWidth:"xl",children:[m==="dashboard"&&e.jsxs(e.Fragment,{children:[e.jsx(j,{elevation:8,sx:{borderRadius:4,p:4,mb:4,background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",position:"relative",overflow:"hidden","&::before":{content:'""',position:"absolute",top:0,right:0,width:"200px",height:"200px",background:"rgba(255,255,255,0.1)",borderRadius:"50%",transform:"translate(50%, -50%)"}},children:e.jsxs(r,{sx:{position:"relative",zIndex:1},children:[e.jsx(t,{variant:"h4",sx:{fontWeight:700,mb:2},children:"خوش آمدید به پنل مدیریت"}),e.jsx(t,{variant:"h6",sx:{opacity:.9,mb:3},children:"سیستم آپلود فایل معلم - مدیریت کامل و جامع"}),e.jsxs(r,{sx:{display:"flex",gap:2,flexWrap:"wrap"},children:[e.jsx(T,{label:`کل معلم‌ها: ${(o==null?void 0:o.total_teachers)||0}`,sx:{backgroundColor:"rgba(255,255,255,0.2)",color:"white"}}),e.jsx(T,{label:`کل آپلودها: ${(o==null?void 0:o.total_uploads)||0}`,sx:{backgroundColor:"rgba(255,255,255,0.2)",color:"white"}}),e.jsx(T,{label:`فضای استفاده شده: ${Xe}`,sx:{backgroundColor:"rgba(255,255,255,0.2)",color:"white"}})]})]})}),e.jsxs(I,{container:!0,spacing:3,sx:{mb:4},children:[e.jsx(I,{xs:12,sm:6,md:3,children:e.jsx(Fe,{elevation:8,sx:{borderRadius:4,background:"linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%)",border:"1px solid rgba(25, 118, 210, 0.1)","&:hover":{transform:"translateY(-4px)",boxShadow:"0 12px 40px rgba(25, 118, 210, 0.2)"},transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},children:e.jsx(q,{sx:{p:3},children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(r,{sx:{width:50,height:50,borderRadius:"50%",backgroundColor:"#1976d2",display:"flex",alignItems:"center",justifyContent:"center",mr:2},children:e.jsx(Cr,{sx:{fontSize:24,color:"white"}})}),e.jsxs(r,{children:[e.jsx(t,{color:"textSecondary",gutterBottom:!0,sx:{fontWeight:600},children:"کل معلم‌ها"}),e.jsx(t,{variant:"h4",sx:{fontWeight:700,color:"#1976d2"},children:(o==null?void 0:o.total_teachers)||0})]})]})})})}),e.jsx(I,{item:!0,xs:12,sm:6,md:3,children:e.jsx(Fe,{elevation:8,sx:{borderRadius:4,background:"linear-gradient(135deg, #e8f5e8 0%, #c8e6c8 100%)",border:"1px solid rgba(76, 175, 80, 0.1)","&:hover":{transform:"translateY(-4px)",boxShadow:"0 12px 40px rgba(76, 175, 80, 0.2)"},transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},children:e.jsx(q,{sx:{p:3},children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(r,{sx:{width:50,height:50,borderRadius:"50%",backgroundColor:"#4caf50",display:"flex",alignItems:"center",justifyContent:"center",mr:2},children:e.jsx(wr,{sx:{fontSize:24,color:"white"}})}),e.jsxs(r,{children:[e.jsx(t,{color:"textSecondary",gutterBottom:!0,sx:{fontWeight:600},children:"کل آپلودها"}),e.jsx(t,{variant:"h4",sx:{fontWeight:700,color:"#4caf50"},children:(o==null?void 0:o.total_uploads)||0})]})]})})})}),e.jsx(I,{xs:12,sm:6,md:3,children:e.jsx(Fe,{elevation:8,sx:{borderRadius:4,background:"linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%)",border:"1px solid rgba(255, 152, 0, 0.1)","&:hover":{transform:"translateY(-4px)",boxShadow:"0 12px 40px rgba(255, 152, 0, 0.2)"},transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},children:e.jsx(q,{sx:{p:3},children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(r,{sx:{width:50,height:50,borderRadius:"50%",backgroundColor:"#ff9800",display:"flex",alignItems:"center",justifyContent:"center",mr:2},children:e.jsx(dr,{sx:{fontSize:24,color:"white"}})}),e.jsxs(r,{children:[e.jsx(t,{color:"textSecondary",gutterBottom:!0,sx:{fontWeight:600},children:"آپلودهای امروز"}),e.jsx(t,{variant:"h4",sx:{fontWeight:700,color:"#ff9800"},children:i.filter(n=>new Date(n.created_at).toDateString()===new Date().toDateString()).length})]})]})})})}),e.jsx(I,{xs:12,sm:6,md:3,children:e.jsx(Fe,{elevation:8,sx:{borderRadius:4,background:"linear-gradient(135deg, #fce4ec 0%, #f8bbd9 100%)",border:"1px solid rgba(233, 30, 99, 0.1)","&:hover":{transform:"translateY(-4px)",boxShadow:"0 12px 40px rgba(233, 30, 99, 0.2)"},transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},children:e.jsx(q,{sx:{p:3},children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(r,{sx:{width:50,height:50,borderRadius:"50%",backgroundColor:"#e91e63",display:"flex",alignItems:"center",justifyContent:"center",mr:2},children:e.jsx(cr,{sx:{fontSize:24,color:"white"}})}),e.jsxs(r,{children:[e.jsx(t,{color:"textSecondary",gutterBottom:!0,sx:{fontWeight:600},children:"فضای استفاده شده"}),e.jsx(t,{variant:"h4",sx:{fontWeight:700,color:"#e91e63"},children:Xe})]})]})})})})]}),e.jsx(j,{elevation:8,sx:{borderRadius:4,p:3,mb:3,background:"rgba(255, 255, 255, 0.96)",backdropFilter:"blur(20px)",border:"1px solid rgba(0,0,0,0.05)"},children:e.jsxs(r,{sx:{display:"flex",gap:2,flexWrap:"wrap",alignItems:"center"},children:[e.jsx(Y,{fullWidth:!0,placeholder:"جستجو در فایل‌ها...",value:E,onChange:n=>Z(n.target.value),InputProps:{startAdornment:e.jsx(Ce,{position:f?"end":"start",children:e.jsx(Ee,{sx:{color:"#666"}})})},sx:{maxWidth:400,"& .MuiOutlinedInput-root":{borderRadius:3}}}),e.jsx(p,{variant:"outlined",onClick:be,startIcon:e.jsx(le,{}),sx:{borderRadius:3,fontWeight:600,borderColor:"#1a237e",color:"#1a237e","&:hover":{backgroundColor:"#1a237e",color:"white"}},children:"بروزرسانی"})]})}),e.jsx(j,{elevation:8,sx:{borderRadius:4,overflow:"hidden",background:"rgba(255, 255, 255, 0.96)",backdropFilter:"blur(20px)",border:"1px solid rgba(0,0,0,0.05)"},children:e.jsxs(q,{sx:{p:3},children:[e.jsx(t,{variant:"h5",sx:{fontWeight:700,mb:3,color:"#1a237e"},children:"تمام آپلودهای سیستم"}),e.jsx(de,{children:e.jsxs(ce,{children:[e.jsx(xe,{children:e.jsxs(V,{sx:{backgroundColor:"#f8f9fa"},children:[e.jsx(s,{sx:{fontWeight:700,fontSize:"1rem"},children:"فایل"}),e.jsx(s,{sx:{fontWeight:700,fontSize:"1rem"},children:"معلم"}),e.jsx(s,{sx:{fontWeight:700,fontSize:"1rem"},children:"پایه"}),e.jsx(s,{sx:{fontWeight:700,fontSize:"1rem"},children:"تنظیمات"}),e.jsx(s,{sx:{fontWeight:700,fontSize:"1rem"},children:"تاریخ"}),e.jsx(s,{sx:{fontWeight:700,fontSize:"1rem",textAlign:"center"},children:"عملیات"})]})}),e.jsx(he,{children:De.map(n=>e.jsxs(V,{sx:{"&:hover":{backgroundColor:"#f8f9fa"}},children:[e.jsx(s,{children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(r,{sx:{width:40,height:40,borderRadius:"8px",background:"linear-gradient(135deg, #1976d2 0%, #42a5f5 100%)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Te,{sx:{fontSize:20,color:"white"}})}),e.jsx(t,{variant:"body1",sx:{fontWeight:600},children:n.filename})]})}),e.jsx(s,{children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(_e,{sx:{fontSize:16,color:"#666"}}),e.jsx(t,{variant:"body2",children:n.teacher})]})}),e.jsx(s,{children:e.jsx(T,{label:`پایه ${n.grade}`,size:"small",color:"primary",variant:"outlined",sx:{fontWeight:600}})}),e.jsx(s,{children:e.jsxs(r,{sx:{display:"flex",flexDirection:"column",gap:.5},children:[e.jsx(T,{label:n.duplex?"پشت و رو":"یک طرف",size:"small",color:n.duplex?"secondary":"default"}),e.jsxs(t,{variant:"caption",children:["کاغذ ",n.paper_size]})]})}),e.jsx(s,{children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(xr,{sx:{fontSize:16,color:"#666"}}),e.jsx(t,{variant:"body2",children:rr(n.created_at)})]})}),e.jsx(s,{children:e.jsxs(r,{sx:{display:"flex",gap:1,justifyContent:"center"},children:[e.jsx(G,{title:"دانلود",children:e.jsx(U,{onClick:()=>Qe(n),sx:{backgroundColor:"#e3f2fd",color:"#1976d2","&:hover":{backgroundColor:"#1976d2",color:"white"}},children:e.jsx(ie,{})})}),e.jsx(G,{title:"حذف",children:e.jsx(U,{onClick:()=>Ze(n.id),sx:{backgroundColor:"#ffebee",color:"#f44336","&:hover":{backgroundColor:"#f44336",color:"white"}},children:e.jsx(Se,{})})})]})})]},n.id))})]})}),De.length===0&&e.jsxs(r,{sx:{p:8,textAlign:"center"},children:[e.jsx(t,{variant:"h6",sx:{color:"#666",mb:2},children:"فایلی یافت نشد"}),e.jsx(t,{variant:"body2",color:"text.secondary",children:"هیچ فایلی با معیارهای جستجو مطابقت ندارد"})]})]})})]}),m==="analytics"&&e.jsxs(r,{children:[e.jsx(t,{variant:"h4",sx:{fontWeight:700,mb:4,color:"#1a237e"},children:"آمار و تحلیل سیستم"}),e.jsxs(I,{container:!0,spacing:3,sx:{mb:4},children:[e.jsx(I,{item:!0,xs:12,md:6,children:e.jsxs(j,{elevation:8,sx:{borderRadius:4,p:3,height:"400px",background:"rgba(255, 255, 255, 0.96)",backdropFilter:"blur(20px)",border:"1px solid rgba(0,0,0,0.05)"},children:[e.jsx(t,{variant:"h6",sx:{fontWeight:600,mb:2,color:"#1a237e"},children:"توزیع آپلودها بر اساس پایه"}),e.jsxs(r,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"300px"},children:[e.jsx(nt,{sx:{fontSize:120,color:"#1976d2",opacity:.5}}),e.jsx(t,{variant:"body1",sx:{position:"absolute",color:"#666"},children:"نمودار آماری در آینده اضافه خواهد شد"})]})]})}),e.jsx(I,{item:!0,xs:12,md:6,children:e.jsxs(j,{elevation:8,sx:{borderRadius:4,p:3,height:"400px",background:"rgba(255, 255, 255, 0.96)",backdropFilter:"blur(20px)",border:"1px solid rgba(0,0,0,0.05)"},children:[e.jsx(t,{variant:"h6",sx:{fontWeight:600,mb:2,color:"#1a237e"},children:"روند آپلودها در طول زمان"}),e.jsxs(r,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"300px"},children:[e.jsx(st,{sx:{fontSize:120,color:"#4caf50",opacity:.5}}),e.jsx(t,{variant:"body1",sx:{position:"absolute",color:"#666"},children:"نمودار روند در آینده اضافه خواهد شد"})]})]})})]}),e.jsxs(j,{elevation:8,sx:{borderRadius:4,p:3,background:"rgba(255, 255, 255, 0.96)",backdropFilter:"blur(20px)",border:"1px solid rgba(0,0,0,0.05)"},children:[e.jsx(t,{variant:"h6",sx:{fontWeight:600,mb:3,color:"#1a237e"},children:"آمار پیشرفته سیستم"}),e.jsxs(I,{container:!0,spacing:3,children:[e.jsx(I,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(r,{sx:{textAlign:"center",p:2,border:"1px solid #e0e0e0",borderRadius:2},children:[e.jsx(ot,{sx:{fontSize:40,color:"#ff9800",mb:1}}),e.jsx(t,{variant:"h4",sx:{fontWeight:700,color:"#ff9800"},children:i.filter(n=>new Date(n.created_at).toDateString()===new Date().toDateString()).length}),e.jsx(t,{variant:"body2",color:"text.secondary",children:"آپلودهای امروز"})]})}),e.jsx(I,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(r,{sx:{textAlign:"center",p:2,border:"1px solid #e0e0e0",borderRadius:2},children:[e.jsx(dr,{sx:{fontSize:40,color:"#4caf50",mb:1}}),e.jsx(t,{variant:"h4",sx:{fontWeight:700,color:"#4caf50"},children:Math.round(i.length/Math.max((o==null?void 0:o.total_teachers)||1,1)*10)/10}),e.jsx(t,{variant:"body2",color:"text.secondary",children:"میانگین آپلود per معلم"})]})}),e.jsx(I,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(r,{sx:{textAlign:"center",p:2,border:"1px solid #e0e0e0",borderRadius:2},children:[e.jsx(cr,{sx:{fontSize:40,color:"#9c27b0",mb:1}}),e.jsxs(t,{variant:"h4",sx:{fontWeight:700,color:"#9c27b0"},children:[(Ae/Math.max(i.length,1)).toFixed(1)," MB"]}),e.jsx(t,{variant:"body2",color:"text.secondary",children:"حجم متوسط فایل"})]})}),e.jsx(I,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(r,{sx:{textAlign:"center",p:2,border:"1px solid #e0e0e0",borderRadius:2},children:[e.jsx(it,{sx:{fontSize:40,color:"#f44336",mb:1}}),e.jsx(t,{variant:"h4",sx:{fontWeight:700,color:"#f44336"},children:v.length}),e.jsx(t,{variant:"body2",color:"text.secondary",children:"کل فعالیت‌ها"})]})})]})]})]}),m==="teachers"&&e.jsxs(j,{elevation:8,sx:{borderRadius:4,p:3,background:"rgba(255, 255, 255, 0.96)",backdropFilter:"blur(20px)",border:"1px solid rgba(0,0,0,0.05)"},children:[e.jsxs(r,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[e.jsx(t,{variant:"h5",sx:{fontWeight:700,color:"#1a237e"},children:"مدیریت معلم‌ها"}),e.jsxs(r,{sx:{display:"flex",gap:2},children:[e.jsx(p,{variant:"contained",startIcon:e.jsx(hr,{}),sx:{borderRadius:3,fontWeight:600,background:"linear-gradient(135deg, #4caf50 0%, #66bb6a 100%)","&:hover":{background:"linear-gradient(135deg, #388e3c 0%, #4caf50 100%)"}},children:"افزودن معلم جدید"}),e.jsx(p,{variant:"outlined",startIcon:e.jsx(ie,{}),sx:{borderRadius:3,fontWeight:600,borderColor:"#1976d2",color:"#1976d2","&:hover":{backgroundColor:"#f3f9ff",borderColor:"#1565c0"}},children:"خروجی Excel"})]})]}),e.jsxs(r,{sx:{display:"flex",gap:2,mb:3,flexWrap:"wrap"},children:[e.jsx(Y,{placeholder:"جستجو بر اساس نام یا شماره تماس...",value:E,onChange:n=>Z(n.target.value),InputProps:{startAdornment:e.jsx(Ce,{position:"start",children:e.jsx(Ee,{sx:{color:"#666"}})})},sx:{minWidth:300,"& .MuiOutlinedInput-root":{borderRadius:3}}}),e.jsxs(Y,{select:!0,label:"فیلتر پایه",value:K,onChange:n=>fe(n.target.value),sx:{minWidth:120,"& .MuiOutlinedInput-root":{borderRadius:3}},children:[e.jsx(Q,{value:"",children:"همه پایه‌ها"}),[1,2,3,4,5,6,7].map(n=>e.jsxs(Q,{value:n,children:["پایه ",n]},n))]}),e.jsx(p,{variant:"outlined",onClick:be,startIcon:e.jsx(le,{}),sx:{borderRadius:3,fontWeight:600,borderColor:"#1a237e",color:"#1a237e","&:hover":{backgroundColor:"#1a237e",color:"white"}},children:"بروزرسانی"})]}),e.jsx(de,{children:e.jsxs(ce,{children:[e.jsx(xe,{children:e.jsxs(V,{sx:{backgroundColor:"#f8f9fa"},children:[e.jsx(s,{sx:{fontWeight:700,fontSize:"1rem"},children:"شناسه"}),e.jsx(s,{sx:{fontWeight:700,fontSize:"1rem"},children:"نام"}),e.jsx(s,{sx:{fontWeight:700,fontSize:"1rem"},children:"شماره تماس"}),e.jsx(s,{sx:{fontWeight:700,fontSize:"1rem"},children:"پایه"}),e.jsx(s,{sx:{fontWeight:700,fontSize:"1rem"},children:"وضعیت"}),e.jsx(s,{sx:{fontWeight:700,fontSize:"1rem"},children:"تاریخ عضویت"}),e.jsx(s,{sx:{fontWeight:700,fontSize:"1rem",textAlign:"center"},children:"عملیات"})]})}),e.jsx(he,{children:C.filter(n=>n.name.toLowerCase().includes(E.toLowerCase())||n.phone.includes(E)).filter(n=>!K||n.grade===parseInt(K)).map(n=>e.jsxs(V,{sx:{"&:hover":{backgroundColor:"#f8f9fa"}},children:[e.jsxs(s,{sx:{fontWeight:600,color:"#666"},children:["#",n.id]}),e.jsx(s,{children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(Oe,{sx:{width:32,height:32,backgroundColor:"#1976d2",fontSize:"0.9rem",fontWeight:600},children:n.name.charAt(0)}),e.jsx(t,{variant:"body1",sx:{fontWeight:600},children:n.name})]})}),e.jsx(s,{children:e.jsx(t,{variant:"body2",sx:{fontFamily:"monospace"},children:n.phone})}),e.jsx(s,{children:e.jsx(T,{label:`پایه ${n.grade}`,size:"small",color:"primary",variant:"outlined",sx:{fontWeight:600}})}),e.jsx(s,{children:e.jsx(T,{label:n.is_active?"فعال":"غیرفعال",color:n.is_active?"success":"error",size:"small",sx:{fontWeight:600}})}),e.jsx(s,{children:e.jsx(t,{variant:"body2",color:"text.secondary",children:new Date(n.created_at).toLocaleDateString("fa-IR")})}),e.jsx(s,{children:e.jsxs(r,{sx:{display:"flex",gap:1,justifyContent:"center"},children:[e.jsx(G,{title:"ویرایش",children:e.jsx(U,{size:"small",sx:{backgroundColor:"#e3f2fd",color:"#1976d2","&:hover":{backgroundColor:"#1976d2",color:"white"}},children:e.jsx(Ve,{fontSize:"small"})})}),e.jsx(G,{title:"حذف",children:e.jsx(U,{size:"small",onClick:()=>{z(n),ee(!0)},sx:{backgroundColor:"#ffebee",color:"#f44336","&:hover":{backgroundColor:"#f44336",color:"white"}},children:e.jsx(Se,{fontSize:"small"})})})]})})]},n.id))})]})}),C.length===0&&e.jsxs(r,{sx:{p:8,textAlign:"center"},children:[e.jsx(t,{variant:"h6",sx:{color:"#666",mb:2},children:"هیچ معلمی یافت نشد"}),e.jsx(t,{variant:"body2",color:"text.secondary",children:"هنوز هیچ معلمی در سیستم ثبت نشده است"})]})]}),m==="admins"&&e.jsxs(j,{elevation:8,sx:{borderRadius:4,p:3,background:"rgba(255, 255, 255, 0.96)",backdropFilter:"blur(20px)",border:"1px solid rgba(0,0,0,0.05)"},children:[e.jsxs(r,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[e.jsx(t,{variant:"h5",sx:{fontWeight:700,color:"#1a237e"},children:"مدیریت مدیران سیستم"}),e.jsxs(r,{sx:{display:"flex",gap:2},children:[e.jsx(p,{variant:"contained",startIcon:e.jsx(hr,{}),sx:{borderRadius:3,fontWeight:600,background:"linear-gradient(135deg, #9c27b0 0%, #ba68c8 100%)","&:hover":{background:"linear-gradient(135deg, #7b1fa2 0%, #9c27b0 100%)"}},children:"افزودن مدیر جدید"}),e.jsx(p,{variant:"outlined",startIcon:e.jsx(ie,{}),sx:{borderRadius:3,fontWeight:600,borderColor:"#9c27b0",color:"#9c27b0","&:hover":{backgroundColor:"#f3e5f5",borderColor:"#7b1fa2"}},children:"خروجی Excel"})]})]}),e.jsx(de,{children:e.jsxs(ce,{children:[e.jsx(xe,{children:e.jsxs(V,{sx:{backgroundColor:"#f8f9fa"},children:[e.jsx(s,{sx:{fontWeight:700,fontSize:"1rem"},children:"شناسه"}),e.jsx(s,{sx:{fontWeight:700,fontSize:"1rem"},children:"شماره تماس"}),e.jsx(s,{sx:{fontWeight:700,fontSize:"1rem"},children:"نام کامل"}),e.jsx(s,{sx:{fontWeight:700,fontSize:"1rem"},children:"ایمیل"}),e.jsx(s,{sx:{fontWeight:700,fontSize:"1rem"},children:"وضعیت"}),e.jsx(s,{sx:{fontWeight:700,fontSize:"1rem"},children:"آخرین ورود"}),e.jsx(s,{sx:{fontWeight:700,fontSize:"1rem",textAlign:"center"},children:"عملیات"})]})}),e.jsx(he,{children:A.map(n=>e.jsxs(V,{sx:{"&:hover":{backgroundColor:"#f8f9fa"}},children:[e.jsxs(s,{sx:{fontWeight:600,color:"#666"},children:["#",n.id]}),e.jsx(s,{children:e.jsx(t,{variant:"body2",sx:{fontFamily:"monospace"},children:n.phone})}),e.jsx(s,{children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(Oe,{sx:{width:32,height:32,backgroundColor:"#9c27b0",fontSize:"0.9rem",fontWeight:600},children:n.full_name.charAt(0)}),e.jsx(t,{variant:"body1",sx:{fontWeight:600},children:n.full_name})]})}),e.jsx(s,{children:e.jsx(t,{variant:"body2",color:"text.secondary",children:n.email})}),e.jsx(s,{children:e.jsx(T,{label:n.is_active?"فعال":"غیرفعال",color:n.is_active?"success":"error",size:"small",sx:{fontWeight:600}})}),e.jsx(s,{children:e.jsx(t,{variant:"body2",color:"text.secondary",children:n.last_login||"هرگز"})}),e.jsx(s,{children:e.jsxs(r,{sx:{display:"flex",gap:1,justifyContent:"center"},children:[e.jsx(G,{title:"ویرایش",children:e.jsx(U,{size:"small",sx:{backgroundColor:"#f3e5f5",color:"#9c27b0","&:hover":{backgroundColor:"#9c27b0",color:"white"}},children:e.jsx(Ve,{fontSize:"small"})})}),e.jsx(G,{title:"حذف",children:e.jsx(U,{size:"small",sx:{backgroundColor:"#fce4ec",color:"#e91e63","&:hover":{backgroundColor:"#e91e63",color:"white"}},children:e.jsx(Se,{fontSize:"small"})})})]})})]},n.id))})]})}),A.length===0&&e.jsxs(r,{sx:{p:8,textAlign:"center"},children:[e.jsx(t,{variant:"h6",sx:{color:"#666",mb:2},children:"هیچ مدیری یافت نشد"}),e.jsx(t,{variant:"body2",color:"text.secondary",children:"هنوز هیچ مدیری در سیستم ثبت نشده است"})]})]}),m==="settings"&&e.jsxs(r,{children:[e.jsx(t,{variant:"h4",sx:{fontWeight:700,mb:4,color:"#1a237e"},children:"تنظیمات سیستم"}),e.jsxs(I,{container:!0,spacing:3,children:[e.jsx(I,{item:!0,xs:12,md:6,children:e.jsxs(j,{elevation:8,sx:{borderRadius:4,p:3,background:"rgba(255, 255, 255, 0.96)",backdropFilter:"blur(20px)",border:"1px solid rgba(0,0,0,0.05)"},children:[e.jsx(t,{variant:"h6",sx:{fontWeight:600,mb:3,color:"#1a237e"},children:"تنظیمات عمومی"}),e.jsxs(r,{sx:{display:"flex",flexDirection:"column",gap:3},children:[e.jsx(Y,{label:"حداکثر حجم فایل (MB)",type:"number",defaultValue:X.maxFileSize,fullWidth:!0,sx:{"& .MuiOutlinedInput-root":{borderRadius:3}}}),e.jsx(Y,{label:"پسوندهای مجاز",defaultValue:X.allowedExtensions.join(", "),fullWidth:!0,sx:{"& .MuiOutlinedInput-root":{borderRadius:3}}}),e.jsx(at,{control:e.jsx(lt,{defaultChecked:!X.maintenanceMode}),label:"حالت نگهداری"})]})]})}),e.jsx(I,{item:!0,xs:12,md:6,children:e.jsxs(j,{elevation:8,sx:{borderRadius:4,p:3,background:"rgba(255, 255, 255, 0.96)",backdropFilter:"blur(20px)",border:"1px solid rgba(0,0,0,0.05)"},children:[e.jsx(t,{variant:"h6",sx:{fontWeight:600,mb:3,color:"#1a237e"},children:"تنظیمات پشتیبان‌گیری"}),e.jsxs(r,{sx:{display:"flex",flexDirection:"column",gap:3},children:[e.jsxs(Y,{select:!0,label:"فرکانس پشتیبان‌گیری",defaultValue:X.backupFrequency,fullWidth:!0,sx:{"& .MuiOutlinedInput-root":{borderRadius:3}},children:[e.jsx(Q,{value:"daily",children:"روزانه"}),e.jsx(Q,{value:"weekly",children:"هفتگی"}),e.jsx(Q,{value:"monthly",children:"ماهانه"})]}),e.jsx(p,{variant:"contained",startIcon:e.jsx(gr,{}),sx:{borderRadius:3,fontWeight:600,background:"linear-gradient(135deg, #ff9800 0%, #ffb74d 100%)","&:hover":{background:"linear-gradient(135deg, #f57c00 0%, #ff9800 100%)"}},children:"پشتیبان‌گیری فوری"})]})]})})]})]}),m==="database"&&e.jsxs(r,{children:[e.jsx(t,{variant:"h4",sx:{fontWeight:700,mb:4,color:"#1a237e"},children:"مدیریت پایگاه داده"}),e.jsxs(I,{container:!0,spacing:3,children:[e.jsx(I,{item:!0,xs:12,md:6,children:e.jsxs(j,{elevation:8,sx:{borderRadius:4,p:3,background:"rgba(255, 255, 255, 0.96)",backdropFilter:"blur(20px)",border:"1px solid rgba(0,0,0,0.05)"},children:[e.jsx(t,{variant:"h6",sx:{fontWeight:600,mb:3,color:"#1a237e"},children:"آمار پایگاه داده"}),e.jsxs(r,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsxs(r,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(t,{variant:"body2",children:"کل معلم‌ها:"}),e.jsx(t,{variant:"body2",sx:{fontWeight:600},children:(o==null?void 0:o.total_teachers)||0})]}),e.jsxs(r,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(t,{variant:"body2",children:"کل آپلودها:"}),e.jsx(t,{variant:"body2",sx:{fontWeight:600},children:(o==null?void 0:o.total_uploads)||0})]}),e.jsxs(r,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(t,{variant:"body2",children:"کل فعالیت‌ها:"}),e.jsx(t,{variant:"body2",sx:{fontWeight:600},children:v.length})]}),e.jsxs(r,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(t,{variant:"body2",children:"کل مدیران:"}),e.jsx(t,{variant:"body2",sx:{fontWeight:600},children:A.length})]})]})]})}),e.jsx(I,{item:!0,xs:12,md:6,children:e.jsxs(j,{elevation:8,sx:{borderRadius:4,p:3,background:"rgba(255, 255, 255, 0.96)",backdropFilter:"blur(20px)",border:"1px solid rgba(0,0,0,0.05)"},children:[e.jsx(t,{variant:"h6",sx:{fontWeight:600,mb:3,color:"#1a237e"},children:"عملیات پایگاه داده"}),e.jsxs(r,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsx(p,{variant:"outlined",startIcon:e.jsx(gr,{}),sx:{borderRadius:3,fontWeight:600,borderColor:"#4caf50",color:"#4caf50","&:hover":{backgroundColor:"#e8f5e8",borderColor:"#388e3c"}},children:"پشتیبان‌گیری از داده‌ها"}),e.jsx(p,{variant:"outlined",startIcon:e.jsx(le,{}),sx:{borderRadius:3,fontWeight:600,borderColor:"#2196f3",color:"#2196f3","&:hover":{backgroundColor:"#e3f2fd",borderColor:"#1976d2"}},children:"بهینه‌سازی پایگاه داده"}),e.jsx(p,{variant:"outlined",startIcon:e.jsx(Database,{}),color:"warning",sx:{borderRadius:3,fontWeight:600},children:"بازسازی ایندکس‌ها"})]})]})})]})]}),m==="logs"&&e.jsxs(j,{elevation:8,sx:{borderRadius:4,p:3,background:"rgba(255, 255, 255, 0.96)",backdropFilter:"blur(20px)",border:"1px solid rgba(0,0,0,0.05)"},children:[e.jsxs(r,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[e.jsx(t,{variant:"h5",sx:{fontWeight:700,color:"#1a237e"},children:"گزارش فعالیت‌های سیستم"}),e.jsxs(r,{sx:{display:"flex",gap:2},children:[e.jsx(p,{variant:"outlined",startIcon:e.jsx(ie,{}),sx:{borderRadius:3,fontWeight:600,borderColor:"#1a237e",color:"#1a237e","&:hover":{backgroundColor:"#1a237e",color:"white"}},children:"خروجی گزارش"}),e.jsx(p,{variant:"outlined",startIcon:e.jsx(le,{}),onClick:be,sx:{borderRadius:3,fontWeight:600,borderColor:"#1a237e",color:"#1a237e","&:hover":{backgroundColor:"#1a237e",color:"white"}},children:"بروزرسانی"})]})]}),e.jsx(de,{children:e.jsxs(ce,{children:[e.jsx(xe,{children:e.jsxs(V,{sx:{backgroundColor:"#f8f9fa"},children:[e.jsx(s,{sx:{fontWeight:700,fontSize:"1rem"},children:"شناسه"}),e.jsx(s,{sx:{fontWeight:700,fontSize:"1rem"},children:"کاربر"}),e.jsx(s,{sx:{fontWeight:700,fontSize:"1rem"},children:"نوع فعالیت"}),e.jsx(s,{sx:{fontWeight:700,fontSize:"1rem"},children:"توضیحات"}),e.jsx(s,{sx:{fontWeight:700,fontSize:"1rem"},children:"آدرس IP"}),e.jsx(s,{sx:{fontWeight:700,fontSize:"1rem"},children:"تاریخ"})]})}),e.jsx(he,{children:v.slice(0,50).map(n=>e.jsxs(V,{sx:{"&:hover":{backgroundColor:"#f8f9fa"}},children:[e.jsxs(s,{sx:{fontWeight:600,color:"#666"},children:["#",n.id]}),e.jsx(s,{children:e.jsx(t,{variant:"body2",sx:{fontWeight:600},children:n.teacher_name})}),e.jsx(s,{children:e.jsx(T,{label:n.action,size:"small",color:n.action==="login"?"success":n.action==="upload"?"primary":n.action==="delete"?"error":"default",sx:{fontWeight:600,fontSize:"0.75rem"}})}),e.jsx(s,{children:e.jsx(t,{variant:"body2",children:n.description})}),e.jsx(s,{children:e.jsx(t,{variant:"body2",sx:{fontFamily:"monospace",fontSize:"0.8rem"},children:n.ip_address})}),e.jsx(s,{children:e.jsx(t,{variant:"body2",color:"text.secondary",children:n.created_at})})]},n.id))})]})}),v.length===0&&e.jsxs(r,{sx:{p:8,textAlign:"center"},children:[e.jsx(t,{variant:"h6",sx:{color:"#666",mb:2},children:"هیچ فعالیتی یافت نشد"}),e.jsx(t,{variant:"body2",color:"text.secondary",children:"هنوز هیچ فعالیتی در سیستم ثبت نشده است"})]})]}),m==="files"&&e.jsxs(e.Fragment,{children:[e.jsx(j,{elevation:8,sx:{borderRadius:4,p:3,mb:3,background:"rgba(255, 255, 255, 0.96)",backdropFilter:"blur(20px)",border:"1px solid rgba(0,0,0,0.05)"},children:e.jsxs(r,{sx:{display:"flex",gap:2,flexWrap:"wrap",alignItems:"center"},children:[e.jsx(Y,{placeholder:"جستجو در فایل‌ها...",value:E,onChange:n=>Z(n.target.value),InputProps:{startAdornment:e.jsx(Ce,{position:f?"end":"start",children:e.jsx(Ee,{sx:{color:"#666"}})})},sx:{maxWidth:400,"& .MuiOutlinedInput-root":{borderRadius:3}}}),e.jsx(p,{variant:"outlined",onClick:be,startIcon:e.jsx(le,{}),sx:{borderRadius:3,fontWeight:600,borderColor:"#1a237e",color:"#1a237e","&:hover":{backgroundColor:"#1a237e",color:"white"}},children:"بروزرسانی"})]})}),e.jsx(j,{elevation:8,sx:{borderRadius:4,overflow:"hidden",background:"rgba(255, 255, 255, 0.96)",backdropFilter:"blur(20px)",border:"1px solid rgba(0,0,0,0.05)"},children:e.jsxs(q,{sx:{p:3},children:[e.jsx(t,{variant:"h5",sx:{fontWeight:700,mb:3,color:"#1a237e"},children:"تمام آپلودهای سیستم"}),e.jsx(de,{children:e.jsxs(ce,{children:[e.jsx(xe,{children:e.jsxs(V,{sx:{backgroundColor:"#f8f9fa"},children:[e.jsx(s,{sx:{fontWeight:700,fontSize:"1rem"},children:"فایل"}),e.jsx(s,{sx:{fontWeight:700,fontSize:"1rem"},children:"معلم"}),e.jsx(s,{sx:{fontWeight:700,fontSize:"1rem"},children:"پایه"}),e.jsx(s,{sx:{fontWeight:700,fontSize:"1rem"},children:"تنظیمات"}),e.jsx(s,{sx:{fontWeight:700,fontSize:"1rem"},children:"تاریخ"}),e.jsx(s,{sx:{fontWeight:700,fontSize:"1rem",textAlign:"center"},children:"عملیات"})]})}),e.jsx(he,{children:De.map(n=>e.jsxs(V,{sx:{"&:hover":{backgroundColor:"#f8f9fa"}},children:[e.jsx(s,{children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(r,{sx:{width:40,height:40,borderRadius:"8px",background:"linear-gradient(135deg, #1976d2 0%, #42a5f5 100%)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Te,{sx:{fontSize:20,color:"white"}})}),e.jsx(t,{variant:"body1",sx:{fontWeight:600},children:n.filename})]})}),e.jsx(s,{children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(_e,{sx:{fontSize:16,color:"#666"}}),e.jsx(t,{variant:"body2",children:n.teacher})]})}),e.jsx(s,{children:e.jsx(T,{label:`پایه ${n.grade}`,size:"small",color:"primary",variant:"outlined",sx:{fontWeight:600}})}),e.jsx(s,{children:e.jsxs(r,{sx:{display:"flex",flexDirection:"column",gap:.5},children:[e.jsx(T,{label:n.duplex?"پشت و رو":"یک طرف",size:"small",color:n.duplex?"secondary":"default"}),e.jsxs(t,{variant:"caption",children:["کاغذ ",n.paper_size]})]})}),e.jsx(s,{children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(xr,{sx:{fontSize:16,color:"#666"}}),e.jsx(t,{variant:"body2",children:rr(n.created_at)})]})}),e.jsx(s,{children:e.jsxs(r,{sx:{display:"flex",gap:1,justifyContent:"center"},children:[e.jsx(G,{title:"دانلود",children:e.jsx(U,{onClick:()=>Qe(n),sx:{backgroundColor:"#e3f2fd",color:"#1976d2","&:hover":{backgroundColor:"#1976d2",color:"white"}},children:e.jsx(ie,{})})}),e.jsx(G,{title:"حذف",children:e.jsx(U,{onClick:()=>Ze(n.id),sx:{backgroundColor:"#ffebee",color:"#f44336","&:hover":{backgroundColor:"#f44336",color:"white"}},children:e.jsx(Se,{})})})]})})]},n.id))})]})}),De.length===0&&e.jsxs(r,{sx:{p:8,textAlign:"center"},children:[e.jsx(t,{variant:"h6",sx:{color:"#666",mb:2},children:"فایلی یافت نشد"}),e.jsx(t,{variant:"body2",color:"text.secondary",children:"هیچ فایلی با معیارهای جستجو مطابقت ندارد"})]})]})})]})]})]}),e.jsxs(mr,{open:ue,onClose:()=>ee(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsx(vr,{sx:{fontWeight:700,fontSize:"1.25rem"},children:"تایید حذف معلم"}),e.jsx(yr,{children:e.jsxs(t,{variant:"body1",children:["آیا مطمئن هستید که می‌خواهید معلم ",e.jsx("strong",{children:d==null?void 0:d.name})," را حذف کنید؟",e.jsx("br",{}),"تمام فایل‌های این معلم نیز حذف خواهند شد."]})}),e.jsxs(Sr,{children:[e.jsx(p,{onClick:()=>ee(!1),sx:{fontWeight:600},children:"لغو"}),e.jsx(p,{onClick:()=>Ar(d==null?void 0:d.id),variant:"contained",color:"error",sx:{fontWeight:600},children:"حذف"})]})]}),e.jsx(kr,{open:W.open,autoHideDuration:6e3,onClose:er,anchorOrigin:{vertical:"top",horizontal:"center"},children:e.jsx(We,{onClose:er,severity:W.severity,sx:{width:"100%",fontSize:"1rem"},children:W.message})})]})}function Rt(){const[a,l]=c.useState(null),[h,w]=c.useState(null),[f,o]=c.useState(!1),[b,i]=c.useState("login"),[y,C]=c.useState(!0),S=g=>{g?M.defaults.headers.common.Authorization=`Bearer ${g}`:delete M.defaults.headers.common.Authorization};c.useEffect(()=>{const g=localStorage.getItem("authToken"),D=localStorage.getItem("authRole"),H=localStorage.getItem("user"),O=localStorage.getItem("adminProfile");if(g&&D){if(S(g),D==="admin"&&O){try{const m=JSON.parse(O);w(m)}catch(m){console.error("Failed to parse admin profile:",m),localStorage.removeItem("adminProfile")}o(!0),i("admin-dashboard")}else if(D==="teacher"&&H)try{const m=JSON.parse(H);l(m),i("upload")}catch(m){console.error("Failed to parse user profile:",m),localStorage.removeItem("user")}}else if(localStorage.getItem("adminAccess")==="true"&&O){try{const B=JSON.parse(O);w(B)}catch(B){console.error("Failed to parse admin profile:",B),localStorage.removeItem("adminProfile")}o(!0),i("admin-dashboard")}else if(H)try{const B=JSON.parse(H);l(B),i("upload")}catch(B){console.error("Failed to parse user profile:",B),localStorage.removeItem("user")}C(!1)},[]);const A=g=>{!g||!g.token||!g.role||(S(g.token),localStorage.setItem("authToken",g.token),localStorage.setItem("authRole",g.role),g.role==="teacher"&&g.teacher?(l(g.teacher),w(null),o(!1),localStorage.setItem("user",JSON.stringify(g.teacher)),localStorage.removeItem("adminProfile"),localStorage.removeItem("adminAccess"),i("upload")):g.role==="admin"&&g.admin&&(l(null),w(g.admin),o(!0),localStorage.setItem("adminProfile",JSON.stringify(g.admin)),localStorage.setItem("adminAccess","true"),localStorage.removeItem("user"),i("admin-dashboard")))},u=g=>{A(g)},v=()=>{S(null),l(null),w(null),o(!1),localStorage.removeItem("authToken"),localStorage.removeItem("authRole"),localStorage.removeItem("user"),localStorage.removeItem("adminProfile"),localStorage.removeItem("adminAccess"),i("login")},_=()=>{switch(b){case"login":return e.jsxs(r,{children:[e.jsx(mt,{onLogin:A}),e.jsx(r,{sx:{position:"fixed",bottom:32,left:32,zIndex:1e3,display:{xs:"none",md:"block"}},children:e.jsxs(r,{component:"button",onClick:()=>i("admin-login"),sx:{background:"linear-gradient(135deg, #dc004e 0%, #ff5983 100%)",color:"white",border:"none",borderRadius:"50px",padding:"16px 24px",fontSize:"0.95rem",fontWeight:600,cursor:"pointer",boxShadow:"0 8px 32px rgba(220, 0, 78, 0.4)",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{transform:"translateY(-4px)",boxShadow:"0 12px 40px rgba(220, 0, 78, 0.5)"},"&:active":{transform:"translateY(-2px)"}},children:[e.jsx(ae,{sx:{fontSize:20}}),"ورود به پنل مدیریت"]})}),e.jsx(r,{sx:{position:"fixed",bottom:20,left:20,zIndex:1e3,display:{xs:"block",md:"none"}},children:e.jsx(r,{component:"button",onClick:()=>i("admin-login"),sx:{background:"linear-gradient(135deg, #dc004e 0%, #ff5983 100%)",color:"white",border:"none",borderRadius:"50%",width:"56px",height:"56px",cursor:"pointer",boxShadow:"0 6px 20px rgba(220, 0, 78, 0.4)",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{transform:"scale(1.1)",boxShadow:"0 8px 25px rgba(220, 0, 78, 0.5)"}},children:e.jsx(ae,{sx:{fontSize:24}})})})]});case"admin-login":return e.jsx(Wt,{onAdminLogin:u});case"admin-dashboard":return e.jsx(It,{onLogout:v,adminProfile:h});case"upload":return e.jsx(St,{user:a,onNavigate:i,onLogout:v});case"myfiles":return e.jsx(kt,{user:a,onNavigate:i,onLogout:v});default:return e.jsx(r,{sx:{minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"24px",background:"linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)",textAlign:"center"},children:e.jsxs(r,{sx:{maxWidth:"600px",width:"100%",backgroundColor:"white",borderRadius:"24px",padding:"48px 32px",boxShadow:"0 20px 60px rgba(0,0,0,0.1)",border:"1px solid rgba(0,0,0,0.05)"},children:[e.jsx(r,{sx:{width:"120px",height:"120px",borderRadius:"50%",background:"linear-gradient(135deg, #1976d2 0%, #42a5f5 100%)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 32px auto",boxShadow:"0 12px 40px rgba(25, 118, 210, 0.3)"},children:e.jsx(ke,{sx:{fontSize:60,color:"white"}})}),e.jsx(t,{variant:"h3",component:"h1",sx:{fontWeight:700,color:"#1976d2",mb:2,fontSize:{xs:"2rem",sm:"2.5rem",md:"3rem"},lineHeight:1.2},children:"سیستم آپلود فایل معلم"}),e.jsx(t,{variant:"h6",sx:{color:"#666",mb:4,fontSize:{xs:"1rem",sm:"1.1rem"},lineHeight:1.6},children:"سیستم حرفه‌ای و مدرن برای مدیریت فایل‌های آموزشی"}),e.jsxs(r,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},gap:"16px",justifyContent:"center",alignItems:"center"},children:[e.jsxs(r,{component:"button",onClick:()=>i("login"),sx:{background:"linear-gradient(135deg, #1976d2 0%, #42a5f5 100%)",color:"white",border:"none",borderRadius:"16px",padding:"16px 32px",fontSize:"1.1rem",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",boxShadow:"0 8px 32px rgba(25, 118, 210, 0.3)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",minWidth:"200px","&:hover":{transform:"translateY(-2px)",boxShadow:"0 12px 40px rgba(25, 118, 210, 0.4)"},"&:active":{transform:"translateY(0)"}},children:[e.jsx(ke,{sx:{fontSize:20}}),"ورود معلم"]}),e.jsxs(r,{component:"button",onClick:()=>i("admin-login"),sx:{background:"white",color:"#dc004e",border:"2px solid #dc004e",borderRadius:"16px",padding:"14px 32px",fontSize:"1.1rem",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",minWidth:"200px","&:hover":{backgroundColor:"#dc004e",color:"white",transform:"translateY(-2px)",boxShadow:"0 8px 24px rgba(220, 0, 78, 0.3)"},"&:active":{transform:"translateY(0)"}},children:[e.jsx(ae,{sx:{fontSize:20}}),"ورود مدیر"]})]})]})})}};return y?e.jsx(ur,{children:e.jsx(r,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",background:"linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)"},children:e.jsxs(r,{sx:{textAlign:"center",backgroundColor:"white",padding:"48px 32px",borderRadius:"24px",boxShadow:"0 20px 60px rgba(0,0,0,0.1)",border:"1px solid rgba(0,0,0,0.05)"},children:[e.jsxs(r,{sx:{position:"relative",display:"inline-block",mb:3},children:[e.jsx(ge,{size:60,sx:{color:"#1976d2"}}),e.jsx(r,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"30px",height:"30px",borderRadius:"50%",background:"linear-gradient(135deg, #1976d2 0%, #42a5f5 100%)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(ke,{sx:{fontSize:16,color:"white"}})})]}),e.jsx(t,{variant:"h6",sx:{color:"#666",fontWeight:500},children:"در حال بارگذاری سیستم..."})]})})}):e.jsx(ur,{children:e.jsx(r,{sx:{minHeight:"100vh",backgroundColor:"#fafafa"},children:_()})})}Ye.createRoot(document.getElementById("root")).render(e.jsx(Wr.StrictMode,{children:e.jsx(Rt,{})}));
