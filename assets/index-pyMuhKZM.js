var Dr=Object.defineProperty,Fr=Object.defineProperties;var Mr=Object.getOwnPropertyDescriptors;var or=Object.getOwnPropertySymbols;var Or=Object.prototype.hasOwnProperty,Tr=Object.prototype.propertyIsEnumerable;var ir=(l,a,h)=>a in l?Dr(l,a,{enumerable:!0,configurable:!0,writable:!0,value:h}):l[a]=h,B=(l,a)=>{for(var h in a||(a={}))Or.call(a,h)&&ir(l,h,a[h]);if(or)for(var h of or(a))Tr.call(a,h)&&ir(l,h,a[h]);return l},U=(l,a)=>Fr(l,Mr(a));var q=(l,a,h)=>new Promise((g,u)=>{var o=b=>{try{i(h.next(b))}catch(k){u(k)}},p=b=>{try{i(h.throw(b))}catch(k){u(k)}},i=b=>b.done?g(b.value):Promise.resolve(b.value).then(o,p);i((h=h.apply(l,a)).next())});import{c as _r,j as e,S as Lr,C as Pr,T as pr,a as Br,b as br,u as Pe,d as Be,B as r,e as we,P as S,f as K,g as ge,h as t,i as N,I as ee,k as Er,F as Ne,l as Ve,m as Ye,M as Z,n as E,G as $r,o as H,V as Ur,p as Hr,A as We,q as m,r as ue,L as Gr,s as ae,t as Nr,v as Vr,w as Yr,x as qr,y as Jr,z as qe,D as ar,E as lr,H as jr,J as ye,K as Se,N as ke,O as _e,Q as Kr,R as Xr,U as Oe,W as Le,X as de,Y as $e,Z as dr,_ as ce,$ as xe,a0 as he,a1 as J,a2 as s,a3 as fe,a4 as Qr,a5 as V,a6 as Zr,a7 as et,a8 as Je,a9 as Ce,aa as rt,ab as mr,ac as vr,ad as yr,ae as Sr,af as kr,ag as le,ah as tt,ai as nt,aj as Ue,ak as st,al as ot,am as it,an as D,ao as Fe,ap as Cr,aq as wr,ar as cr,as as Te,at as He,au as xr,av as at,aw as lt,ax as dt,ay as ct,az as hr,aA as xt,aB as ht,aC as fr,aD as ft,aE as gt,aF as ut,aG as pt}from"./mui-BEj2V9-c.js";import{c as bt,a as Wr,r as d}from"./vendor-B1Kjdn4M.js";import{a as L}from"./axios-ok5IlGam.js";import{c as ze}from"./utils-6sX9dlI2.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))g(u);new MutationObserver(u=>{for(const o of u)if(o.type==="childList")for(const p of o.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&g(p)}).observe(document,{childList:!0,subtree:!0});function h(u){const o={};return u.integrity&&(o.integrity=u.integrity),u.referrerPolicy&&(o.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?o.credentials="include":u.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function g(u){if(u.ep)return;u.ep=!0;const o=h(u);fetch(u.href,o)}})();var Ke={},gr=bt;Ke.createRoot=gr.createRoot,Ke.hydrateRoot=gr.hydrateRoot;const jt=_r({key:"rtl",prepend:!0}),mt=({children:l})=>(Wr.useEffect(()=>{document.documentElement.dir="rtl",document.documentElement.lang="fa",document.title="سیستم آپلود فایل معلم";const a=document.querySelector('meta[name="viewport"]');a&&a.setAttribute("content","width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no")},[]),e.jsx(Lr,{injectFirst:!0,children:e.jsx(Pr,{value:jt,children:l})})),zr=d.createContext(),Ee=()=>{const l=d.useContext(zr);if(!l)throw new Error("useThemeDesign must be used within a ThemeDesignProvider");return l},vt=()=>br({direction:"rtl",palette:{primary:{main:"#1976d2",light:"#42a5f5",dark:"#1565c0",contrastText:"#ffffff"},secondary:{main:"#dc004e",light:"#ff5983",dark:"#9a0036",contrastText:"#ffffff"},background:{default:"#fafafa",paper:"#ffffff"},text:{primary:"#212121",secondary:"#757575"},grey:{50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121"},success:{main:"#4caf50"},warning:{main:"#ff9800"},error:{main:"#f44336"},info:{main:"#2196f3"}},typography:{fontFamily:["Vazirmatn","Vazirmatn VF","Vazirmatn-Light","Vazirmatn-Medium","Vazirmatn-Bold","IRANSans","IRANSans-web","IRANSansX","Tahoma","Arial","sans-serif"].join(","),fontSize:16,h1:{fontSize:"2.75rem",fontWeight:700,lineHeight:1.2,letterSpacing:"-0.02em"},h2:{fontSize:"2.25rem",fontWeight:700,lineHeight:1.3,letterSpacing:"-0.01em"},h3:{fontSize:"1.9rem",fontWeight:600,lineHeight:1.3},h4:{fontSize:"1.6rem",fontWeight:600,lineHeight:1.4},h5:{fontSize:"1.35rem",fontWeight:600,lineHeight:1.4},h6:{fontSize:"1.2rem",fontWeight:600,lineHeight:1.5},body1:{fontSize:"1.1rem",lineHeight:1.6},body2:{fontSize:"0.95rem",lineHeight:1.6},button:{fontSize:"1.1rem",fontWeight:600,textTransform:"none",letterSpacing:"0.02em"},caption:{fontSize:"0.8rem",lineHeight:1.4}},spacing:8,shape:{borderRadius:12},components:{MuiCssBaseline:{styleOverrides:{body:{fontFamily:["Vazirmatn","Vazirmatn VF","IRANSans","IRANSans-web","IRANSansX","Tahoma","Arial","sans-serif"].join(","),direction:"rtl",textAlign:"right",fontFeatureSettings:'"liga" 1, "kern" 1',WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale"},html:{direction:"rtl"},'*[dir="rtl"]':{direction:"rtl"}}},MuiButton:{styleOverrides:{root:{borderRadius:12,padding:"12px 24px",fontSize:"1rem",fontWeight:600,textTransform:"none",boxShadow:"none","&:hover":{boxShadow:"0 4px 8px rgba(0,0,0,0.12)"}},contained:{boxShadow:"0 2px 4px rgba(0,0,0,0.1)","&:hover":{boxShadow:"0 6px 12px rgba(0,0,0,0.15)"}}}},MuiTextField:{styleOverrides:{root:{"& .MuiOutlinedInput-root":{borderRadius:12,"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"#1976d2",borderWidth:"2px"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"#1976d2",borderWidth:"2px"}}}}},MuiCard:{styleOverrides:{root:{borderRadius:16,boxShadow:"0 4px 12px rgba(0,0,0,0.08)","&:hover":{boxShadow:"0 8px 24px rgba(0,0,0,0.12)",transform:"translateY(-2px)"},transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"}}},MuiPaper:{styleOverrides:{root:{borderRadius:16},elevation1:{boxShadow:"0 2px 4px rgba(0,0,0,0.08)"},elevation2:{boxShadow:"0 4px 8px rgba(0,0,0,0.12)"},elevation3:{boxShadow:"0 8px 16px rgba(0,0,0,0.16)"}}},MuiAppBar:{styleOverrides:{root:{backgroundColor:"#1976d2",boxShadow:"0 2px 8px rgba(25, 118, 210, 0.2)"}}},MuiDrawer:{styleOverrides:{paper:{borderRadius:0,backgroundColor:"#ffffff",borderRight:"1px solid rgba(0,0,0,0.08)"}}},MuiListItem:{styleOverrides:{root:{borderRadius:8,margin:"4px 8px","&.Mui-selected":{backgroundColor:"rgba(25, 118, 210, 0.08)","&:hover":{backgroundColor:"rgba(25, 118, 210, 0.12)"}}}}},MuiTableHead:{styleOverrides:{root:{backgroundColor:"#f8f9fa","& .MuiTableCell-head":{fontWeight:600,color:"#424242",borderBottom:"2px solid #e0e0e0"}}}},MuiTableCell:{styleOverrides:{root:{padding:"16px 24px",borderBottom:"1px solid #f0f0f0"}}},MuiChip:{styleOverrides:{root:{borderRadius:8,fontWeight:500}}},MuiDialog:{styleOverrides:{paper:{borderRadius:16}}},MuiDialogTitle:{styleOverrides:{root:{fontSize:"1.25rem",fontWeight:600,color:"#212121",padding:"24px 24px 16px 24px"}}},MuiDialogContent:{styleOverrides:{root:{padding:"16px 24px"}}},MuiDialogActions:{styleOverrides:{root:{padding:"16px 24px 24px 24px",gap:"8px"}}}}}),ur=({children:l})=>{const a=d.useMemo(()=>vt(),[]),h=d.useMemo(()=>({theme:a,isRTL:!0,direction:"rtl"}),[a]);return e.jsx(zr.Provider,{value:h,children:e.jsxs(pr,{theme:a,children:[e.jsx(mt,{}),e.jsx(Br,{}),l]})})},yt=ze.apiBaseUrl,Ge=[{value:"0",label:"پیش‌دبستانی",color:"#fff8e1"},{value:"1",label:"پایه اول",color:"#e3f2fd"},{value:"2",label:"پایه دوم",color:"#f3e5f5"},{value:"3",label:"پایه سوم",color:"#fff3e0"},{value:"4",label:"پایه چهارم",color:"#e8f5e8"},{value:"5",label:"پایه پنجم",color:"#fce4ec"},{value:"6",label:"پایه ششم",color:"#f1f8e9"},{value:"7",label:"پایه هفتم",color:"#e0f2f1"}];function St({onLogin:l}){const a=Pe();Be(a.breakpoints.down("md"));const{isRTL:h}=Ee(),[g,u]=d.useState({phone:"",grade:"",password:""}),[o,p]=d.useState(!1),[i,b]=d.useState(""),[k,w]=d.useState(!1),[M,z]=d.useState(!1),[I,Y]=d.useState(!1),f=v=>{u(U(B({},g),{[v.target.name]:v.target.value})),i&&b("")},R=v=>q(this,null,function*(){var O,T;v.preventDefault(),p(!0),b("");const y=g.phone.trim(),j=!!g.password.trim();if(!y){b("شماره تماس الزامی است"),p(!1);return}if(!y.match(/^[\d\-\+\(\)\s]{10,15}$/)){b("فرمت شماره تماس صحیح نیست"),p(!1);return}if(!j&&!g.grade){b("پایه تحصیلی الزامی است"),p(!1);return}try{const P={phone:y};j?P.password=g.password:P.grade=parseInt(g.grade,10);const G=yield L.post(`${yt}/login/`,P);G.data.success?l(G.data):b(G.data.error||"اطلاعات ورودی صحیح نیست")}catch(P){console.error("Login error:",P),(T=(O=P.response)==null?void 0:O.data)!=null&&T.error?b(P.response.data.error):b("خطا در اتصال به سرور. لطفاً مجدداً تلاش کنید.")}finally{p(!1)}});return Ge.find(v=>v.value===g.grade),e.jsx(r,{sx:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #667eea 0%, #764ba2 25%, #f093fb 50%, #f5576c 75%, #4facfe 100%)",backgroundSize:"400% 400%",animation:"gradientShift 15s ease infinite","@keyframes gradientShift":{"0%":{backgroundPosition:"0% 50%"},"50%":{backgroundPosition:"100% 50%"},"100%":{backgroundPosition:"0% 50%"}},padding:{xs:2,sm:3,md:4}},children:e.jsx(we,{maxWidth:"sm",children:e.jsx(S,{elevation:24,sx:{borderRadius:{xs:4,sm:6,md:8},overflow:"hidden",background:"rgba(255, 255, 255, 0.96)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.2)",position:"relative","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:"6px",background:"linear-gradient(90deg, #1976d2, #42a5f5, #f093fb, #f5576c)",borderRadius:"8px 8px 0 0"}},children:e.jsxs(K,{sx:{p:{xs:4,sm:5,md:6},position:"relative"},children:[e.jsxs(r,{textAlign:"center",mb:5,children:[e.jsx(r,{sx:{width:{xs:80,sm:100,md:120},height:{xs:80,sm:100,md:120},borderRadius:"50%",background:"linear-gradient(135deg, #1976d2 0%, #42a5f5 100%)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 24px auto",boxShadow:"0 12px 40px rgba(25, 118, 210, 0.4)",position:"relative","&::after":{content:'""',position:"absolute",top:-4,left:-4,right:-4,bottom:-4,borderRadius:"50%",background:"linear-gradient(45deg, #1976d2, #42a5f5, #f093fb)",zIndex:-1,opacity:.3}},children:e.jsx(ge,{sx:{fontSize:{xs:36,sm:42,md:48},color:"white"}})}),e.jsx(t,{variant:"h3",component:"h1",sx:{fontWeight:800,background:"linear-gradient(135deg, #1976d2 0%, #42a5f5 100%)",backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",mb:2,fontSize:{xs:"1.75rem",sm:"2.25rem",md:"2.5rem"},lineHeight:1.2,letterSpacing:"-0.02em"},children:"سیستم آپلود فایل معلم"}),e.jsx(t,{variant:"h6",sx:{color:"#666",fontWeight:500,mb:1,fontSize:{xs:"1rem",sm:"1.1rem"},lineHeight:1.6},children:"لطفاً اطلاعات خود را وارد کنید"}),e.jsx(t,{variant:"body2",sx:{color:"#999",fontSize:"0.9rem"},children:"ورود ایمن و سریع با استفاده از شماره تماس"})]}),e.jsx("form",{onSubmit:R,children:e.jsxs(r,{sx:{display:"flex",flexDirection:"column",gap:4},children:[e.jsx(N,{fullWidth:!0,label:"شماره تماس",name:"phone",type:"tel",value:g.phone,onChange:f,onFocus:()=>w(!0),onBlur:()=>w(!1),required:!0,variant:"outlined",error:!!i&&!g.phone,helperText:g.phone&&!g.phone.match(/^[\d\-\+\(\)\s]{10,15}$/)?"فرمت صحیح: 09123456789":"",InputProps:{startAdornment:e.jsx(ee,{position:h?"end":"start",children:e.jsx(r,{sx:{width:40,height:40,borderRadius:"50%",backgroundColor:k?"#e3f2fd":"#f5f5f5",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.3s ease"},children:e.jsx(Er,{sx:{fontSize:20,color:k?"#1976d2":"#666"}})})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:4,fontSize:"1.1rem","&.Mui-focused fieldset":{borderColor:"#1976d2",borderWidth:"2px"}},"& .MuiInputLabel-root.Mui-focused":{color:"#1976d2",fontWeight:600}}}),e.jsxs(Ne,{fullWidth:!0,required:!0,sx:{"& .MuiOutlinedInput-root":{borderRadius:4},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"#1976d2",borderWidth:"2px"}},children:[e.jsx(Ve,{sx:{fontSize:"1.1rem",fontWeight:500,"&.Mui-focused":{color:"#1976d2",fontWeight:600}},children:"پایه تحصیلی"}),e.jsx(Ye,{name:"grade",value:g.grade,onChange:f,onFocus:()=>z(!0),onBlur:()=>z(!1),label:"پایه تحصیلی",startAdornment:e.jsx(ee,{position:h?"end":"start",children:e.jsx(r,{sx:{width:40,height:40,borderRadius:"50%",backgroundColor:M?"#e3f2fd":"#f5f5f5",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.3s ease"},children:e.jsx($r,{sx:{fontSize:20,color:M?"#1976d2":"#666"}})})}),renderValue:v=>{if(!v)return"";const y=Ge.find(j=>j.value===v);return e.jsx(r,{sx:{display:"flex",alignItems:"center",gap:2},children:e.jsx(E,{label:y==null?void 0:y.label,size:"small",sx:{backgroundColor:y==null?void 0:y.color,color:"#333",fontWeight:600,fontSize:"0.9rem"}})})},sx:{fontSize:"1.1rem","& .MuiSelect-select":{padding:"18px 16px"}},children:Ge.map(v=>e.jsx(Z,{value:v.value,children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:2,width:"100%"},children:[e.jsx(r,{sx:{width:12,height:12,borderRadius:"50%",backgroundColor:v.color,border:"2px solid rgba(0,0,0,0.1)"}}),e.jsx(t,{variant:"body1",sx:{fontWeight:500},children:v.label})]})},v.value))})]}),e.jsx(N,{fullWidth:!0,label:"رمز عبور مدیریت (اختیاری)",name:"password",type:I?"text":"password",value:g.password,onChange:f,variant:"outlined",InputProps:{startAdornment:e.jsx(ee,{position:h?"end":"start",children:e.jsx(r,{sx:{width:40,height:40,borderRadius:"50%",backgroundColor:"#f5f5f5",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(ge,{sx:{fontSize:20,color:"#666"}})})}),endAdornment:e.jsx(ee,{position:h?"start":"end",children:e.jsx(H,{onClick:()=>Y(!I),edge:"end",children:I?e.jsx(Ur,{}):e.jsx(Hr,{})})})},helperText:"برای ورود به پنل مدیریت، رمز عبور را وارد کنید (پایه الزامی نیست)",sx:{"& .MuiOutlinedInput-root":{borderRadius:4}}}),i&&e.jsx(We,{severity:"error",sx:{borderRadius:3,fontSize:"1rem","& .MuiAlert-icon":{fontSize:"1.5rem"}},children:i}),e.jsx(m,{type:"submit",fullWidth:!0,variant:"contained",size:"large",disabled:o,startIcon:o?e.jsx(ue,{size:20,color:"inherit"}):e.jsx(Gr,{}),sx:{mt:3,py:2,borderRadius:4,fontSize:{xs:"1rem",sm:"1.1rem"},fontWeight:700,textTransform:"none",background:"linear-gradient(135deg, #1976d2 0%, #42a5f5 100%)",boxShadow:"0 8px 32px rgba(25, 118, 210, 0.4)",position:"relative",overflow:"hidden","&:hover":{background:"linear-gradient(135deg, #1565c0 0%, #1976d2 100%)",boxShadow:"0 12px 40px rgba(25, 118, 210, 0.5)",transform:"translateY(-2px)"},"&:active":{transform:"translateY(0)"},"&::before":{content:'""',position:"absolute",top:0,left:h?"100%":"-100%",width:"100%",height:"100%",background:"linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent)",transition:"left 0.6s"},"&:hover::before":{left:h?"-100%":"100%"},transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},children:o?"در حال ورود...":"ورود به سیستم"}),e.jsx(r,{textAlign:"center",mt:2,children:e.jsx(t,{variant:"body2",sx:{color:"#666",fontSize:"0.9rem"},children:"برای ورود به پنل مدیریت می‌توانید رمز عبور را همینجا وارد کنید یا از دکمه شناور استفاده کنید"})})]})})]})})})})}const kt=ze.apiBaseUrl,se=[{label:"انتخاب فایل",description:"فایل مورد نظر خود را انتخاب کنید",icon:e.jsx(qe,{})},{label:"مشخصات",description:"توضیحات و تنظیمات چاپ را وارد کنید",icon:e.jsx(_e,{})},{label:"تایید",description:"بررسی نهایی و ارسال فایل",icon:e.jsx(Xr,{})}],Ct=[{value:"A4",label:"A4",description:"سایز استاندارد"},{value:"A5",label:"A5",description:"سایز کوچک"}];function wt({user:l,onNavigate:a,onLogout:h}){var je;const g=Pe();Be(g.breakpoints.down("md"));const{isRTL:u}=Ee(),[o,p]=d.useState(0),[i,b]=d.useState({file:null,description:"",pages:"",paper_size:"A4",duplex:"0"}),[k,w]=d.useState(!1),[M,z]=d.useState(""),[I,Y]=d.useState(!1),[f,R]=d.useState(0),[v,y]=d.useState(!1),j=d.useRef(null),O=c=>{const A=c.target.files[0];A&&(b(U(B({},i),{file:A})),A.type==="application/pdf"?Y(!0):(Y(!1),b(X=>U(B({},X),{pages:""}))),o===0&&p(1))},T=c=>{c.preventDefault(),c.stopPropagation(),c.type==="dragenter"||c.type==="dragover"?y(!0):c.type==="dragleave"&&y(!1)},P=c=>{if(c.preventDefault(),c.stopPropagation(),y(!1),c.dataTransfer.files&&c.dataTransfer.files[0]){const A=c.dataTransfer.files[0];b(U(B({},i),{file:A})),A.type==="application/pdf"?Y(!0):(Y(!1),b(X=>U(B({},X),{pages:""}))),o===0&&p(1)}},G=c=>{b(U(B({},i),{[c.target.name]:c.target.value}))},pe=()=>{p(c=>c+1)},be=()=>{p(c=>c-1)},re=()=>q(this,null,function*(){var c,A,X;if(!i.file){z("لطفاً فایل را انتخاب کنید");return}w(!0),z("");try{const F=new FormData;F.append("file",i.file),F.append("user_id",l.id),F.append("description",i.description),F.append("paper_size",i.paper_size),F.append("duplex",i.duplex),I&&F.append("pages",i.pages),R(10),(yield L.post(`${kt}/upload/`,F,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:C=>{const W=Math.round(C.loaded*100/C.total);R(W)}})).data.success?(z("فایل با موفقیت آپلود شد"),R(100),setTimeout(()=>{a("myfiles")},2e3)):z("خطا در آپلود فایل")}catch(F){if(console.error("Upload error:",F),((c=F.response)==null?void 0:c.status)===401){h();return}(X=(A=F.response)==null?void 0:A.data)!=null&&X.error?z(F.response.data.error):z("خطا در اتصال به سرور")}finally{w(!1)}}),Ie=c=>{if(c===0)return"0 Bytes";const A=1024,X=["Bytes","KB","MB","GB"],F=Math.floor(Math.log(c)/Math.log(A));return parseFloat((c/Math.pow(A,F)).toFixed(2))+" "+X[F]};return l?e.jsx(r,{sx:{minHeight:"100vh",background:"linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)",padding:{xs:2,sm:3,md:4},direction:"rtl"},children:e.jsxs(we,{maxWidth:"md",children:[e.jsx(S,{elevation:8,sx:{borderRadius:4,overflow:"hidden",background:"linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%)",border:"1px solid rgba(0,0,0,0.05)",mb:4},children:e.jsxs(K,{sx:{p:4},children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:3,flexWrap:"wrap",gap:2},children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(r,{sx:{width:60,height:60,borderRadius:"50%",background:"linear-gradient(135deg, #1976d2 0%, #42a5f5 100%)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 8px 32px rgba(25, 118, 210, 0.3)"},children:e.jsx(ge,{sx:{fontSize:28,color:"white"}})}),e.jsxs(r,{children:[e.jsx(t,{variant:"h4",sx:{fontWeight:700,color:"#1976d2",mb:.5},children:"آپلود فایل"}),e.jsxs(t,{variant:"h6",color:"text.secondary",children:[l==null?void 0:l.name," - پایه ",l==null?void 0:l.grade]})]})]}),e.jsxs(r,{sx:{display:"flex",gap:2},children:[e.jsx(m,{variant:"outlined",onClick:()=>a("myfiles"),startIcon:e.jsx(ae,{}),sx:{borderRadius:3,fontWeight:600,borderColor:"#1976d2",color:"#1976d2","&:hover":{backgroundColor:"#1976d2",color:"white"}},children:"فایل‌های من"}),e.jsx(m,{variant:"contained",color:"error",onClick:h,startIcon:e.jsx(Nr,{}),sx:{borderRadius:3,fontWeight:600,backgroundColor:"#f44336","&:hover":{backgroundColor:"#d32f2f"}},children:"خروج"})]})]}),e.jsx(Vr,{activeStep:o,orientation:"horizontal",sx:{mb:4},children:se.map((c,A)=>e.jsx(Yr,{children:e.jsx(qr,{sx:{"& .MuiStepLabel-label":{fontWeight:600,fontSize:"1rem"}},children:c.label})},c.label))})]})}),e.jsx(S,{elevation:8,sx:{borderRadius:4,overflow:"hidden",background:"rgba(255, 255, 255, 0.96)",backdropFilter:"blur(20px)",border:"1px solid rgba(0,0,0,0.05)"},children:e.jsxs(K,{sx:{p:{xs:3,sm:4,md:5}},children:[o===0&&e.jsxs(r,{children:[e.jsx(t,{variant:"h5",sx:{fontWeight:600,mb:3,textAlign:"center"},children:se[0].label}),e.jsx(t,{variant:"body1",color:"text.secondary",sx:{mb:4,textAlign:"center"},children:se[0].description}),e.jsxs(r,{onDragEnter:T,onDragLeave:T,onDragOver:T,onDrop:P,onClick:()=>{var c;return(c=j.current)==null?void 0:c.click()},sx:{border:"3px dashed",borderColor:v?"#1976d2":"#ddd",borderRadius:4,p:{xs:4,sm:6,md:8},textAlign:"center",backgroundColor:v?"#e3f2fd":"#fafafa",cursor:"pointer",transition:"all 0.3s ease","&:hover":{borderColor:"#1976d2",backgroundColor:"#f5f5f5"}},children:[e.jsx(Jr,{sx:{fontSize:64,color:"#1976d2",mb:2}}),e.jsx(t,{variant:"h6",sx:{fontWeight:600,mb:1},children:"فایل را اینجا رها کنید یا کلیک کنید"}),e.jsx(t,{variant:"body2",color:"text.secondary",children:"فرمت‌های مجاز: PDF, JPG, PNG, TXT (حداکثر 50MB)"})]}),e.jsx("input",{ref:j,type:"file",accept:".pdf,.jpg,.jpeg,.png,.txt",onChange:O,style:{display:"none"}}),i.file&&e.jsx(S,{elevation:4,sx:{mt:3,p:3,borderRadius:3,backgroundColor:"#f8f9fa",border:"1px solid #e9ecef"},children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(qe,{sx:{fontSize:32,color:"#1976d2"}}),e.jsxs(r,{sx:{flexGrow:1},children:[e.jsx(t,{variant:"h6",sx:{fontWeight:600},children:i.file.name}),e.jsxs(t,{variant:"body2",color:"text.secondary",children:[Ie(i.file.size)," - ",i.file.type]})]}),e.jsx(E,{label:"فایل انتخاب شد",color:"success",sx:{fontWeight:600}})]})})]}),o===1&&e.jsxs(r,{children:[e.jsx(t,{variant:"h5",sx:{fontWeight:600,mb:3,textAlign:"center"},children:se[1].label}),e.jsx(t,{variant:"body1",color:"text.secondary",sx:{mb:4,textAlign:"center"},children:se[1].description}),e.jsxs(r,{sx:{display:"flex",flexDirection:"column",gap:4},children:[e.jsx(N,{fullWidth:!0,label:"توضیحات",name:"description",multiline:!0,rows:4,value:i.description,onChange:G,variant:"outlined",placeholder:"توضیحات فایل را وارد کنید...",sx:{"& .MuiOutlinedInput-root":{borderRadius:3}}}),I&&e.jsx(N,{fullWidth:!0,label:"شماره صفحات",name:"pages",value:i.pages,onChange:G,variant:"outlined",placeholder:"مثال: 1-3,5",helperText:"برای PDF‌ها، شماره صفحات مورد نظر را وارد کنید",sx:{"& .MuiOutlinedInput-root":{borderRadius:3}}}),e.jsxs(r,{sx:{display:"flex",gap:3,flexWrap:"wrap"},children:[e.jsxs(Ne,{sx:{minWidth:200,flexGrow:1},children:[e.jsx(Ve,{sx:{fontWeight:600},children:"اندازه کاغذ"}),e.jsx(Ye,{name:"paper_size",value:i.paper_size,onChange:G,label:"اندازه کاغذ",sx:{borderRadius:3},children:Ct.map(c=>e.jsx(Z,{value:c.value,children:e.jsxs(r,{children:[e.jsx(t,{variant:"body1",sx:{fontWeight:600},children:c.label}),e.jsx(t,{variant:"body2",color:"text.secondary",children:c.description})]})},c.value))})]}),e.jsxs(Ne,{sx:{minWidth:200,flexGrow:1},children:[e.jsx(Ve,{sx:{fontWeight:600},children:"نوع چاپ"}),e.jsxs(Ye,{name:"duplex",value:i.duplex,onChange:G,label:"نوع چاپ",sx:{borderRadius:3},children:[e.jsx(Z,{value:"0",children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(ar,{sx:{color:"#666"}}),e.jsx(t,{children:"یک طرف"})]})}),e.jsx(Z,{value:"1",children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(lr,{sx:{color:"#1976d2"}}),e.jsx(t,{children:"پشت و رو"})]})})]})]})]})]})]}),o===2&&e.jsxs(r,{children:[e.jsx(t,{variant:"h5",sx:{fontWeight:600,mb:3,textAlign:"center"},children:se[2].label}),e.jsx(t,{variant:"body1",color:"text.secondary",sx:{mb:4,textAlign:"center"},children:se[2].description}),e.jsxs(S,{elevation:4,sx:{p:4,borderRadius:3,backgroundColor:"#f8f9fa",border:"1px solid #e9ecef",mb:4},children:[e.jsx(t,{variant:"h6",sx:{fontWeight:600,mb:3},children:"بررسی اطلاعات فایل"}),e.jsxs(jr,{sx:{p:0},children:[e.jsxs(ye,{sx:{px:0,py:1},children:[e.jsx(Se,{children:e.jsx(qe,{sx:{color:"#1976d2"}})}),e.jsx(ke,{primary:"نام فایل",secondary:(je=i.file)==null?void 0:je.name})]}),e.jsxs(ye,{sx:{px:0,py:1},children:[e.jsx(Se,{children:e.jsx(_e,{sx:{color:"#1976d2"}})}),e.jsx(ke,{primary:"توضیحات",secondary:i.description||"بدون توضیح"})]}),e.jsxs(ye,{sx:{px:0,py:1},children:[e.jsx(Se,{children:e.jsx(lr,{sx:{color:"#1976d2"}})}),e.jsx(ke,{primary:"تنظیمات",secondary:`کاغذ ${i.paper_size} - ${i.duplex==="1"?"پشت و رو":"یک طرف"}`})]}),I&&i.pages&&e.jsxs(ye,{sx:{px:0,py:1},children:[e.jsx(Se,{children:e.jsx(ar,{sx:{color:"#1976d2"}})}),e.jsx(ke,{primary:"صفحات مورد نظر",secondary:i.pages})]})]})]}),k&&e.jsxs(r,{sx:{mb:3},children:[e.jsx(Kr,{variant:"determinate",value:f,sx:{height:8,borderRadius:4,backgroundColor:"#e0e0e0","& .MuiLinearProgress-bar":{borderRadius:4,background:"linear-gradient(90deg, #1976d2, #42a5f5)"}}}),e.jsxs(t,{variant:"body2",sx:{mt:1,textAlign:"center"},children:["در حال آپلود... ",f,"%"]})]}),M&&e.jsx(We,{severity:M.includes("موفقیت")?"success":"error",sx:{mb:3,borderRadius:3,fontSize:"1rem"},children:M})]}),e.jsxs(r,{sx:{display:"flex",justifyContent:"space-between",mt:4},children:[e.jsx(m,{disabled:o===0,onClick:be,sx:{borderRadius:3,px:4,py:1.5,fontWeight:600},children:"قبلی"}),o===se.length-1?e.jsx(m,{variant:"contained",onClick:re,disabled:k,sx:{borderRadius:3,px:4,py:1.5,fontWeight:600,background:"linear-gradient(135deg, #1976d2 0%, #42a5f5 100%)","&:hover":{background:"linear-gradient(135deg, #1565c0 0%, #1976d2 100%)"}},children:k?"در حال آپلود...":"آپلود فایل"}):e.jsx(m,{variant:"contained",onClick:pe,disabled:o===0&&!i.file,sx:{borderRadius:3,px:4,py:1.5,fontWeight:600,background:"linear-gradient(135deg, #1976d2 0%, #42a5f5 100%)","&:hover":{background:"linear-gradient(135deg, #1565c0 0%, #1976d2 100%)"}},children:"بعدی"})]})]})})]})}):e.jsx(r,{sx:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)",direction:"rtl"},children:e.jsxs(S,{sx:{p:4,borderRadius:4},children:[e.jsx(t,{variant:"h6",sx:{fontWeight:600},children:"برای آپلود فایل ابتدا وارد حساب کاربری شوید."}),e.jsx(m,{sx:{mt:2},variant:"contained",onClick:h,children:"بازگشت به صفحه ورود"})]})})}const Me=ze.apiBaseUrl;function Wt({user:l,onNavigate:a,onLogout:h}){const g=Pe(),u=Be(g.breakpoints.down("md")),{isRTL:o}=Ee(),[p,i]=d.useState([]),[b,k]=d.useState(!0),[w,M]=d.useState(null),[z,I]=d.useState({description:"",pages:"",paper_size:"A4",duplex:"0"}),[Y,f]=d.useState(!1),[R,v]=d.useState(null),[y,j]=d.useState({open:!1,message:"",severity:"success"}),[O,T]=d.useState({});d.useEffect(()=>{l!=null&&l.id&&P()},[l]);const P=()=>q(this,null,function*(){var x;if(l)try{k(!0);const C=yield L.get(`${Me}/my_uploads/`);i(C.data)}catch(C){if(console.error("Error loading files:",C),((x=C.response)==null?void 0:x.status)===401){h();return}c("خطا در بارگذاری فایل‌ها","error")}finally{k(!1)}}),G=x=>q(this,null,function*(){var C;try{T(Xe=>U(B({},Xe),{[x.id]:!0}));const W=yield L.get(`${Me}/download_file/${x.id}/`,{responseType:"blob"}),te=window.URL.createObjectURL(new Blob([W.data])),Q=document.createElement("a");Q.href=te,Q.setAttribute("download",x.filename),document.body.appendChild(Q),Q.click(),Q.remove(),window.URL.revokeObjectURL(te),c("فایل با موفقیت دانلود شد","success")}catch(W){if(console.error("Download error:",W),((C=W.response)==null?void 0:C.status)===401){h();return}c("خطا در دانلود فایل","error")}finally{T(W=>U(B({},W),{[x.id]:!1}))}}),pe=()=>q(this,null,function*(){var x;if(R)try{yield L.post(`${Me}/delete_upload/`,{id:R.id}),i(p.filter(C=>C.id!==R.id)),f(!1),v(null),c("فایل با موفقیت حذف شد","success")}catch(C){if(console.error("Delete error:",C),((x=C.response)==null?void 0:x.status)===401){h();return}c("خطا در حذف فایل","error")}}),be=x=>{M(x.id),I({description:x.description||"",pages:x.pages||"",paper_size:x.paper_size,duplex:x.duplex.toString()})},re=x=>q(this,null,function*(){var C;x.preventDefault();try{yield L.post(`${Me}/edit_upload/`,U(B({id:w},z),{duplex:parseInt(z.duplex)})),i(p.map(W=>W.id===w?U(B(B({},W),z),{duplex:parseInt(z.duplex)}):W)),M(null),c("فایل با موفقیت ویرایش شد","success")}catch(W){if(console.error("Edit error:",W),((C=W.response)==null?void 0:C.status)===401){h();return}c("خطا در ویرایش فایل","error")}}),Ie=x=>{I(U(B({},z),{[x.target.name]:x.target.value}))},je=()=>{M(null)},c=(x,C="success")=>{j({open:!0,message:x,severity:C})},A=()=>{j(U(B({},y),{open:!1}))},X=x=>new Date(x).toLocaleDateString("fa-IR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),F=x=>{if(x===0)return"0 Bytes";const C=1024,W=["Bytes","KB","MB","GB"],te=Math.floor(Math.log(x)/Math.log(C));return parseFloat((x/Math.pow(C,te)).toFixed(2))+" "+W[te]};return l?b?e.jsx(r,{sx:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)"},children:e.jsx(ue,{size:60,sx:{color:"#1976d2"}})}):e.jsx(r,{sx:{minHeight:"100vh",background:"linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)",padding:{xs:2,sm:3,md:4},direction:"rtl"},children:e.jsxs(we,{maxWidth:"lg",children:[e.jsx(S,{elevation:8,sx:{borderRadius:4,overflow:"hidden",background:"linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%)",border:"1px solid rgba(0,0,0,0.05)",mb:4},children:e.jsx(K,{sx:{p:4},children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:3,flexWrap:"wrap",gap:2},children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(Oe,{sx:{width:60,height:60,background:"linear-gradient(135deg, #1976d2 0%, #42a5f5 100%)",boxShadow:"0 8px 32px rgba(25, 118, 210, 0.3)"},children:e.jsx(Le,{sx:{fontSize:28,color:"white"}})}),e.jsxs(r,{children:[e.jsx(t,{variant:"h4",sx:{fontWeight:700,color:"#1976d2",mb:.5},children:"فایل‌های من"}),e.jsxs(t,{variant:"h6",color:"text.secondary",children:[l==null?void 0:l.name," - پایه ",l==null?void 0:l.grade]}),e.jsxs(t,{variant:"body2",color:"text.secondary",children:[p.length," فایل آپلود شده"]})]})]}),e.jsxs(r,{sx:{display:"flex",gap:2,flexWrap:"wrap"},children:[e.jsx(m,{variant:"outlined",onClick:P,startIcon:e.jsx(de,{}),sx:{borderRadius:3,fontWeight:600,borderColor:"#1976d2",color:"#1976d2","&:hover":{backgroundColor:"#1976d2",color:"white"}},children:"بروزرسانی"}),e.jsx(m,{variant:"contained",onClick:()=>a("upload"),startIcon:e.jsx($e,{}),sx:{borderRadius:3,fontWeight:600,background:"linear-gradient(135deg, #1976d2 0%, #42a5f5 100%)","&:hover":{background:"linear-gradient(135deg, #1565c0 0%, #1976d2 100%)"}},children:"آپلود جدید"}),e.jsx(m,{variant:"outlined",onClick:h,sx:{borderRadius:3,fontWeight:600,borderColor:"#dc004e",color:"#dc004e","&:hover":{backgroundColor:"#dc004e",color:"white"}},children:"خروج"})]})]})})}),e.jsx(S,{elevation:8,sx:{borderRadius:4,overflow:"hidden",background:"rgba(255, 255, 255, 0.96)",backdropFilter:"blur(20px)",border:"1px solid rgba(0,0,0,0.05)"},children:p.length===0?e.jsxs(K,{sx:{p:8,textAlign:"center"},children:[e.jsx(r,{sx:{width:120,height:120,borderRadius:"50%",background:"linear-gradient(135deg, #f5f5f5 0%, #e0e0e0 100%)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 24px auto"},children:e.jsx(dr,{sx:{fontSize:60,color:"#999"}})}),e.jsx(t,{variant:"h5",sx:{fontWeight:600,mb:2},children:"هنوز فایلی آپلود نکرده‌اید"}),e.jsx(t,{variant:"body1",color:"text.secondary",sx:{mb:3},children:"برای شروع، اولین فایل خود را آپلود کنید"}),e.jsx(m,{variant:"contained",size:"large",onClick:()=>a("upload"),startIcon:e.jsx($e,{}),sx:{borderRadius:3,px:4,py:2,fontWeight:600,fontSize:"1.1rem",background:"linear-gradient(135deg, #1976d2 0%, #42a5f5 100%)","&:hover":{background:"linear-gradient(135deg, #1565c0 0%, #1976d2 100%)"}},children:"آپلود اولین فایل"})]}):e.jsx(ce,{children:e.jsxs(xe,{children:[e.jsx(he,{children:e.jsxs(J,{children:[e.jsx(s,{sx:{fontWeight:700,fontSize:"1rem"},children:"نام فایل"}),e.jsx(s,{sx:{fontWeight:700,fontSize:"1rem"},children:"توضیحات"}),e.jsx(s,{sx:{fontWeight:700,fontSize:"1rem"},children:"تنظیمات چاپ"}),e.jsx(s,{sx:{fontWeight:700,fontSize:"1rem"},children:"تاریخ"}),e.jsx(s,{sx:{fontWeight:700,fontSize:"1rem",textAlign:"center"},children:"عملیات"})]})}),e.jsx(fe,{children:p.map(x=>e.jsxs(J,{sx:{"&:hover":{backgroundColor:"#f8f9fa"}},children:[e.jsx(s,{children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(r,{sx:{width:40,height:40,borderRadius:"8px",background:"linear-gradient(135deg, #1976d2 0%, #42a5f5 100%)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(dr,{sx:{fontSize:20,color:"white"}})}),e.jsxs(r,{children:[e.jsx(t,{variant:"body1",sx:{fontWeight:600},children:x.filename}),e.jsx(t,{variant:"body2",color:"text.secondary",children:F(x.file_size||0)})]})]})}),e.jsx(s,{children:w===x.id?e.jsx(N,{fullWidth:!0,name:"description",value:z.description,onChange:Ie,variant:"outlined",size:"small",placeholder:"توضیحات...",sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}}):e.jsx(t,{variant:"body2",children:x.description||"-"})}),e.jsx(s,{children:e.jsxs(r,{sx:{display:"flex",flexDirection:"column",gap:1},children:[e.jsx(E,{label:`کاغذ ${x.paper_size}`,size:"small",color:"primary",variant:"outlined"}),e.jsx(E,{label:x.duplex?"پشت و رو":"یک طرف",size:"small",color:x.duplex?"secondary":"default"}),x.pages&&e.jsx(E,{label:`صفحات: ${x.pages}`,size:"small",variant:"outlined"})]})}),e.jsx(s,{children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Qr,{sx:{fontSize:16,color:"#666"}}),e.jsx(t,{variant:"body2",children:X(x.created_at)})]})}),e.jsx(s,{children:e.jsxs(r,{sx:{display:"flex",gap:1,justifyContent:"center"},children:[e.jsx(V,{title:"دانلود",children:e.jsx(H,{onClick:()=>G(x),disabled:O[x.id],sx:{backgroundColor:"#e3f2fd",color:"#1976d2","&:hover":{backgroundColor:"#1976d2",color:"white"}},children:O[x.id]?e.jsx(ue,{size:20}):e.jsx(ae,{})})}),w===x.id?e.jsxs(e.Fragment,{children:[e.jsx(V,{title:"ذخیره",children:e.jsx(H,{onClick:re,sx:{backgroundColor:"#e8f5e8",color:"#4caf50","&:hover":{backgroundColor:"#4caf50",color:"white"}},children:e.jsx(Zr,{})})}),e.jsx(V,{title:"لغو",children:e.jsx(H,{onClick:je,sx:{backgroundColor:"#fce4ec",color:"#e91e63","&:hover":{backgroundColor:"#e91e63",color:"white"}},children:e.jsx(et,{})})})]}):e.jsxs(e.Fragment,{children:[e.jsx(V,{title:"ویرایش",children:e.jsx(H,{onClick:()=>be(x),sx:{backgroundColor:"#fff3e0",color:"#ff9800","&:hover":{backgroundColor:"#ff9800",color:"white"}},children:e.jsx(Je,{})})}),e.jsx(V,{title:"حذف",children:e.jsx(H,{onClick:()=>{v(x),f(!0)},sx:{backgroundColor:"#ffebee",color:"#f44336","&:hover":{backgroundColor:"#f44336",color:"white"}},children:e.jsx(Ce,{})})})]})]})})]},x.id))})]})})}),u&&e.jsx(rt,{color:"primary","aria-label":"آپلود",onClick:()=>a("upload"),sx:{position:"fixed",bottom:24,left:24,background:"linear-gradient(135deg, #1976d2 0%, #42a5f5 100%)","&:hover":{background:"linear-gradient(135deg, #1565c0 0%, #1976d2 100%)"}},children:e.jsx($e,{})}),e.jsxs(mr,{open:Y,onClose:()=>f(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsx(vr,{sx:{fontWeight:700,fontSize:"1.25rem"},children:"تایید حذف فایل"}),e.jsx(yr,{children:e.jsxs(t,{variant:"body1",children:["آیا مطمئن هستید که می‌خواهید فایل ",e.jsx("strong",{children:R==null?void 0:R.filename})," را حذف کنید؟",e.jsx("br",{}),"این عمل قابل بازگشت نیست."]})}),e.jsxs(Sr,{children:[e.jsx(m,{onClick:()=>f(!1),sx:{fontWeight:600},children:"لغو"}),e.jsx(m,{onClick:pe,variant:"contained",color:"error",sx:{fontWeight:600},children:"حذف"})]})]}),e.jsx(kr,{open:y.open,autoHideDuration:6e3,onClose:A,anchorOrigin:{vertical:"top",horizontal:"center"},children:e.jsx(We,{onClose:A,severity:y.severity,sx:{width:"100%",fontSize:"1rem"},children:y.message})})]})}):e.jsx(r,{sx:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)"},children:e.jsxs(S,{sx:{p:4,borderRadius:4},children:[e.jsx(t,{variant:"h6",sx:{fontWeight:600},children:"لطفاً ابتدا وارد حساب کاربری شوید."}),e.jsx(m,{sx:{mt:2},variant:"contained",onClick:h,children:"بازگشت به صفحه ورود"})]})})}const zt=ze.apiBaseUrl,It=br({direction:"rtl",typography:{fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif'},palette:{primary:{main:"#1a237e"},secondary:{main:"#dc004e"},background:{default:"#f5f5f5"}}});function Rt({onAdminLogin:l}){const[a,h]=d.useState({phone:"",password:""}),[g,u]=d.useState(!1),[o,p]=d.useState(""),i=k=>{h(U(B({},a),{[k.target.name]:k.target.value}))},b=k=>q(this,null,function*(){if(k.preventDefault(),u(!0),p(""),!a.phone||!a.password){p("شماره تماس و رمز عبور الزامی است"),u(!1);return}try{const w=yield L.post(`${zt}/admin_login/`,{phone:a.phone,password:a.password});w.data.success?l(w.data):p(w.data.error||"شماره تماس یا رمز عبور اشتباه است")}catch(w){console.error("Admin login error:",w),p("خطا در اتصال به سرور")}finally{u(!1)}});return e.jsx(pr,{theme:It,children:e.jsx(r,{sx:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #1a237e 0%, #3f51b5 100%)",padding:3},children:e.jsx(we,{maxWidth:"sm",children:e.jsx(S,{elevation:16,sx:{borderRadius:4,overflow:"hidden",background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)"},children:e.jsxs(K,{sx:{p:4},children:[e.jsxs(r,{textAlign:"center",mb:4,children:[e.jsx(r,{sx:{width:80,height:80,borderRadius:"50%",background:"linear-gradient(135deg, #1a237e 0%, #3f51b5 100%)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 24px auto",boxShadow:"0 8px 32px rgba(26, 35, 126, 0.3)"},children:e.jsx(le,{sx:{fontSize:40,color:"white"}})}),e.jsx(t,{variant:"h4",component:"h1",gutterBottom:!0,sx:{fontWeight:"bold",color:"#1a237e",mb:2},children:"پنل مدیریت"}),e.jsx(t,{variant:"subtitle1",color:"text.secondary",sx:{mb:1},children:"ورود ایمن برای مدیران سیستم"})]}),e.jsx("form",{onSubmit:b,children:e.jsxs(r,{sx:{display:"flex",flexDirection:"column",gap:3},children:[e.jsx(N,{fullWidth:!0,label:"شماره تماس",name:"phone",type:"tel",value:a.phone,onChange:i,required:!0,variant:"outlined",placeholder:"۰۹۱۲۳۴۵۶۷۸۹",InputProps:{startAdornment:e.jsx(ee,{position:"start",children:e.jsx(Le,{color:"primary"})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:3}}}),e.jsx(N,{fullWidth:!0,label:"رمز عبور",name:"password",type:"password",value:a.password,onChange:i,required:!0,variant:"outlined",InputProps:{startAdornment:e.jsx(ee,{position:"start",children:e.jsx(tt,{color:"primary"})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:3}}}),o&&e.jsx(We,{severity:"error",sx:{borderRadius:3},children:o}),e.jsx(m,{type:"submit",fullWidth:!0,variant:"contained",size:"large",disabled:g,startIcon:g?e.jsx(ue,{size:20}):e.jsx(le,{}),sx:{mt:2,py:1.5,borderRadius:3,fontSize:"1.1rem",fontWeight:"bold",textTransform:"none",background:"linear-gradient(135deg, #1a237e 0%, #3f51b5 100%)",boxShadow:"0 4px 20px rgba(26, 35, 126, 0.3)","&:hover":{background:"linear-gradient(135deg, #0d47a1 0%, #1a237e 100%)",boxShadow:"0 6px 25px rgba(26, 35, 126, 0.4)"}},children:g?"در حال ورود...":"ورود به پنل مدیریت"})]})})]})})})})})}const oe=ze.apiBaseUrl,At=[{text:"داشبورد",icon:e.jsx(ft,{}),active:!0,id:"dashboard"},{text:"آمار و تحلیل",icon:e.jsx(gt,{}),active:!1,id:"analytics"},{text:"مدیریت معلم‌ها",icon:e.jsx(Cr,{}),active:!1,id:"teachers"},{text:"مدیریت فایل‌ها",icon:e.jsx(wr,{}),active:!1,id:"files"},{text:"مدیریت مدیران",icon:e.jsx(le,{}),active:!1,id:"admins"},{text:"تنظیمات سیستم",icon:e.jsx(ut,{}),active:!1,id:"settings"},{text:"پایگاه داده",icon:e.jsx(Te,{}),active:!1,id:"database"},{text:"گزارش‌ها",icon:e.jsx(pt,{}),active:!1,id:"logs"}];function Dt({onLogout:l,adminProfile:a}){const h=Pe(),g=Be(h.breakpoints.down("md")),{isRTL:u}=Ee(),[o,p]=d.useState(null),[i,b]=d.useState([]),[k,w]=d.useState([]),[M,z]=d.useState([]),[I,Y]=d.useState([]),[f,R]=d.useState(!0),[v,y]=d.useState(!1),[j,O]=d.useState("dashboard"),[T,P]=d.useState(""),[G,pe]=d.useState(""),[be,re]=d.useState(!1),[Ie,je]=d.useState(!1),[c,A]=d.useState(null),[X,F]=d.useState(null),[x,C]=d.useState([]),[W,te]=d.useState({open:!1,message:"",severity:"success"}),[Q,Xe]=d.useState({maxFileSize:50,allowedExtensions:["pdf","jpg","jpeg","png","txt"],maintenanceMode:!1,backupFrequency:"daily"}),Re=(a==null?void 0:a.full_name)||"مدیر سیستم",Ir=(Re==null?void 0:Re.charAt(0))||"م",Rr=(a==null?void 0:a.email)||"دسترسی کامل",Ae=(o==null?void 0:o.total_storage_mb)||0,Qe=Ae>=1024?`${(Ae/1024).toFixed(1)} GB`:`${Ae.toFixed(1)} MB`;d.useEffect(()=>{me()},[]);const me=()=>q(this,null,function*(){var n;try{R(!0);const $=[L.get(`${oe}/admin_stats/`),L.get(`${oe}/all_uploads/`),L.get(`${oe}/admin_teachers/`),L.get(`${oe}/admin_users/`),L.get(`${oe}/activity_logs/`)],[_,ve,ne,nr,sr]=yield Promise.all($);_.data.success&&p(_.data.stats),ve.data.success&&b(ve.data.uploads),ne.data.success&&w(ne.data.teachers),nr.data.success&&z(nr.data.admins),sr.data.success&&Y(sr.data.logs)}catch($){if(console.error("Error loading admin data:",$),((n=$.response)==null?void 0:n.status)===401){l();return}ie("خطا در بارگذاری داده‌ها","error")}finally{R(!1)}}),Ar=n=>q(this,null,function*(){var $;try{yield L.post(`${oe}/admin/delete_teacher/`,{id:n}),w(k.filter(_=>_.id!==n)),ie("معلم با موفقیت حذف شد","success"),re(!1),A(null)}catch(_){if(console.error("Delete teacher error:",_),(($=_.response)==null?void 0:$.status)===401){l();return}ie("خطا در حذف معلم","error")}}),Ze=n=>q(this,null,function*(){var $;try{const _=yield L.get(`${oe}/download_file/${n.id}/`,{responseType:"blob"}),ve=window.URL.createObjectURL(new Blob([_.data])),ne=document.createElement("a");ne.href=ve,ne.setAttribute("download",n.filename),document.body.appendChild(ne),ne.click(),ne.remove(),window.URL.revokeObjectURL(ve),ie("فایل با موفقیت دانلود شد","success")}catch(_){if(console.error("Download error:",_),(($=_.response)==null?void 0:$.status)===401){l();return}ie("خطا در دانلود فایل","error")}}),er=n=>q(this,null,function*(){var $;try{yield L.post(`${oe}/delete_upload/`,{id:n}),b(i.filter(_=>_.id!==n)),ie("فایل با موفقیت حذف شد","success")}catch(_){if(console.error("Delete error:",_),(($=_.response)==null?void 0:$.status)===401){l();return}ie("خطا در حذف فایل","error")}}),ie=(n,$="success")=>{te({open:!0,message:n,severity:$})},rr=()=>{te(U(B({},W),{open:!1}))},tr=n=>new Date(n).toLocaleDateString("fa-IR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),De=i.filter(n=>n.filename.toLowerCase().includes(T.toLowerCase())||n.teacher.toLowerCase().includes(T.toLowerCase()));return f?e.jsx(r,{sx:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)"},children:e.jsxs(r,{textAlign:"center",children:[e.jsx(ue,{size:60,sx:{color:"#1a237e",mb:2}}),e.jsx(t,{variant:"h6",sx:{color:"#666"},children:"در حال بارگذاری داده‌های مدیریت..."})]})}):e.jsxs(r,{sx:{display:"flex",minHeight:"100vh",direction:"rtl"},children:[e.jsx(nt,{position:"fixed",sx:{zIndex:h.zIndex.drawer+1,background:"linear-gradient(135deg, #1a237e 0%, #3f51b5 100%)",boxShadow:"0 4px 20px rgba(26, 35, 126, 0.3)"},children:e.jsxs(Ue,{children:[e.jsx(H,{color:"inherit",edge:"start",onClick:()=>y(!v),sx:{mr:2,display:{md:"none"},backgroundColor:"rgba(255, 255, 255, 0.1)","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.2)"}},children:e.jsx(st,{})}),e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(r,{sx:{width:40,height:40,borderRadius:"50%",backgroundColor:"rgba(255, 255, 255, 0.2)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(le,{sx:{fontSize:24}})}),e.jsx(t,{variant:"h6",noWrap:!0,component:"div",sx:{fontWeight:700,fontSize:{xs:"1.1rem",sm:"1.25rem"}},children:"پنل مدیریت سیستم"})]}),e.jsx(r,{sx:{flexGrow:1}}),e.jsx(m,{color:"inherit",onClick:l,startIcon:e.jsx(ot,{}),sx:{fontWeight:600,borderRadius:3,px:2,"&:hover":{backgroundColor:"rgba(255, 255, 255, 0.1)"}},children:"خروج از سیستم"})]})}),e.jsxs(it,{variant:g?"temporary":"permanent",open:v,onClose:()=>y(!1),sx:{width:280,flexShrink:0,"& .MuiDrawer-paper":{width:280,boxSizing:"border-box",backgroundColor:"#ffffff",borderRight:"1px solid rgba(0,0,0,0.08)"}},children:[e.jsx(Ue,{}),e.jsxs(r,{sx:{overflow:"auto",p:2},children:[e.jsx(S,{elevation:4,sx:{p:3,mb:3,borderRadius:3,background:"linear-gradient(135deg, #1a237e 0%, #3f51b5 100%)",color:"white"},children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(Oe,{sx:{width:50,height:50,backgroundColor:"rgba(255, 255, 255, 0.2)",fontWeight:700},children:Ir}),e.jsxs(r,{children:[e.jsx(t,{variant:"h6",sx:{fontWeight:700},children:Re}),e.jsx(t,{variant:"body2",sx:{opacity:.8},children:Rr})]})]})}),e.jsx(jr,{sx:{p:0},children:At.map(n=>e.jsxs(ye,{selected:j===n.id,onClick:()=>O(n.id),sx:{borderRadius:3,mb:1,cursor:"pointer","&.Mui-selected":{backgroundColor:"rgba(26, 35, 126, 0.1)","&:hover":{backgroundColor:"rgba(26, 35, 126, 0.15)"}},"&:hover":{backgroundColor:"rgba(26, 35, 126, 0.05)"}},children:[e.jsx(Se,{children:e.jsx(r,{sx:{width:40,height:40,borderRadius:"50%",backgroundColor:j===n.id?"#1a237e":"rgba(26, 35, 126, 0.1)",display:"flex",alignItems:"center",justifyContent:"center",color:j===n.id?"white":"#1a237e"},children:n.icon})}),e.jsx(ke,{primary:n.text,primaryTypographyProps:{fontWeight:600,fontSize:"1rem"}})]},n.text))})]})]}),e.jsxs(r,{component:"main",sx:{flexGrow:1,p:3},children:[e.jsx(Ue,{}),e.jsxs(we,{maxWidth:"xl",children:[j==="dashboard"&&e.jsxs(e.Fragment,{children:[e.jsx(S,{elevation:8,sx:{borderRadius:4,p:4,mb:4,background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",position:"relative",overflow:"hidden","&::before":{content:'""',position:"absolute",top:0,right:0,width:"200px",height:"200px",background:"rgba(255,255,255,0.1)",borderRadius:"50%",transform:"translate(50%, -50%)"}},children:e.jsxs(r,{sx:{position:"relative",zIndex:1},children:[e.jsx(t,{variant:"h4",sx:{fontWeight:700,mb:2},children:"خوش آمدید به پنل مدیریت"}),e.jsx(t,{variant:"h6",sx:{opacity:.9,mb:3},children:"سیستم آپلود فایل معلم - مدیریت کامل و جامع"}),e.jsxs(r,{sx:{display:"flex",gap:2,flexWrap:"wrap"},children:[e.jsx(E,{label:`کل معلم‌ها: ${(o==null?void 0:o.total_teachers)||0}`,sx:{backgroundColor:"rgba(255,255,255,0.2)",color:"white"}}),e.jsx(E,{label:`کل آپلودها: ${(o==null?void 0:o.total_uploads)||0}`,sx:{backgroundColor:"rgba(255,255,255,0.2)",color:"white"}}),e.jsx(E,{label:`فضای استفاده شده: ${Qe}`,sx:{backgroundColor:"rgba(255,255,255,0.2)",color:"white"}})]})]})}),e.jsxs(D,{container:!0,spacing:3,sx:{mb:4},children:[e.jsx(D,{xs:12,sm:6,md:3,children:e.jsx(Fe,{elevation:8,sx:{borderRadius:4,background:"linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%)",border:"1px solid rgba(25, 118, 210, 0.1)","&:hover":{transform:"translateY(-4px)",boxShadow:"0 12px 40px rgba(25, 118, 210, 0.2)"},transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},children:e.jsx(K,{sx:{p:3},children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(r,{sx:{width:50,height:50,borderRadius:"50%",backgroundColor:"#1976d2",display:"flex",alignItems:"center",justifyContent:"center",mr:2},children:e.jsx(Cr,{sx:{fontSize:24,color:"white"}})}),e.jsxs(r,{children:[e.jsx(t,{color:"textSecondary",gutterBottom:!0,sx:{fontWeight:600},children:"کل معلم‌ها"}),e.jsx(t,{variant:"h4",sx:{fontWeight:700,color:"#1976d2"},children:(o==null?void 0:o.total_teachers)||0})]})]})})})}),e.jsx(D,{item:!0,xs:12,sm:6,md:3,children:e.jsx(Fe,{elevation:8,sx:{borderRadius:4,background:"linear-gradient(135deg, #e8f5e8 0%, #c8e6c8 100%)",border:"1px solid rgba(76, 175, 80, 0.1)","&:hover":{transform:"translateY(-4px)",boxShadow:"0 12px 40px rgba(76, 175, 80, 0.2)"},transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},children:e.jsx(K,{sx:{p:3},children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(r,{sx:{width:50,height:50,borderRadius:"50%",backgroundColor:"#4caf50",display:"flex",alignItems:"center",justifyContent:"center",mr:2},children:e.jsx(wr,{sx:{fontSize:24,color:"white"}})}),e.jsxs(r,{children:[e.jsx(t,{color:"textSecondary",gutterBottom:!0,sx:{fontWeight:600},children:"کل آپلودها"}),e.jsx(t,{variant:"h4",sx:{fontWeight:700,color:"#4caf50"},children:(o==null?void 0:o.total_uploads)||0})]})]})})})}),e.jsx(D,{xs:12,sm:6,md:3,children:e.jsx(Fe,{elevation:8,sx:{borderRadius:4,background:"linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%)",border:"1px solid rgba(255, 152, 0, 0.1)","&:hover":{transform:"translateY(-4px)",boxShadow:"0 12px 40px rgba(255, 152, 0, 0.2)"},transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},children:e.jsx(K,{sx:{p:3},children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(r,{sx:{width:50,height:50,borderRadius:"50%",backgroundColor:"#ff9800",display:"flex",alignItems:"center",justifyContent:"center",mr:2},children:e.jsx(cr,{sx:{fontSize:24,color:"white"}})}),e.jsxs(r,{children:[e.jsx(t,{color:"textSecondary",gutterBottom:!0,sx:{fontWeight:600},children:"آپلودهای امروز"}),e.jsx(t,{variant:"h4",sx:{fontWeight:700,color:"#ff9800"},children:i.filter(n=>new Date(n.created_at).toDateString()===new Date().toDateString()).length})]})]})})})}),e.jsx(D,{xs:12,sm:6,md:3,children:e.jsx(Fe,{elevation:8,sx:{borderRadius:4,background:"linear-gradient(135deg, #fce4ec 0%, #f8bbd9 100%)",border:"1px solid rgba(233, 30, 99, 0.1)","&:hover":{transform:"translateY(-4px)",boxShadow:"0 12px 40px rgba(233, 30, 99, 0.2)"},transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},children:e.jsx(K,{sx:{p:3},children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(r,{sx:{width:50,height:50,borderRadius:"50%",backgroundColor:"#e91e63",display:"flex",alignItems:"center",justifyContent:"center",mr:2},children:e.jsx(Te,{sx:{fontSize:24,color:"white"}})}),e.jsxs(r,{children:[e.jsx(t,{color:"textSecondary",gutterBottom:!0,sx:{fontWeight:600},children:"فضای استفاده شده"}),e.jsx(t,{variant:"h4",sx:{fontWeight:700,color:"#e91e63"},children:Qe})]})]})})})})]}),e.jsx(S,{elevation:8,sx:{borderRadius:4,p:3,mb:3,background:"rgba(255, 255, 255, 0.96)",backdropFilter:"blur(20px)",border:"1px solid rgba(0,0,0,0.05)"},children:e.jsxs(r,{sx:{display:"flex",gap:2,flexWrap:"wrap",alignItems:"center"},children:[e.jsx(N,{fullWidth:!0,placeholder:"جستجو در فایل‌ها...",value:T,onChange:n=>P(n.target.value),InputProps:{startAdornment:e.jsx(ee,{position:u?"end":"start",children:e.jsx(He,{sx:{color:"#666"}})})},sx:{maxWidth:400,"& .MuiOutlinedInput-root":{borderRadius:3}}}),e.jsx(m,{variant:"outlined",onClick:me,startIcon:e.jsx(de,{}),sx:{borderRadius:3,fontWeight:600,borderColor:"#1a237e",color:"#1a237e","&:hover":{backgroundColor:"#1a237e",color:"white"}},children:"بروزرسانی"})]})}),e.jsx(S,{elevation:8,sx:{borderRadius:4,overflow:"hidden",background:"rgba(255, 255, 255, 0.96)",backdropFilter:"blur(20px)",border:"1px solid rgba(0,0,0,0.05)"},children:e.jsxs(K,{sx:{p:3},children:[e.jsx(t,{variant:"h5",sx:{fontWeight:700,mb:3,color:"#1a237e"},children:"تمام آپلودهای سیستم"}),e.jsx(ce,{children:e.jsxs(xe,{children:[e.jsx(he,{children:e.jsxs(J,{sx:{backgroundColor:"#f8f9fa"},children:[e.jsx(s,{sx:{fontWeight:700,fontSize:"1rem"},children:"فایل"}),e.jsx(s,{sx:{fontWeight:700,fontSize:"1rem"},children:"معلم"}),e.jsx(s,{sx:{fontWeight:700,fontSize:"1rem"},children:"پایه"}),e.jsx(s,{sx:{fontWeight:700,fontSize:"1rem"},children:"تنظیمات"}),e.jsx(s,{sx:{fontWeight:700,fontSize:"1rem"},children:"تاریخ"}),e.jsx(s,{sx:{fontWeight:700,fontSize:"1rem",textAlign:"center"},children:"عملیات"})]})}),e.jsx(fe,{children:De.map(n=>e.jsxs(J,{sx:{"&:hover":{backgroundColor:"#f8f9fa"}},children:[e.jsx(s,{children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(r,{sx:{width:40,height:40,borderRadius:"8px",background:"linear-gradient(135deg, #1976d2 0%, #42a5f5 100%)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(_e,{sx:{fontSize:20,color:"white"}})}),e.jsx(t,{variant:"body1",sx:{fontWeight:600},children:n.filename})]})}),e.jsx(s,{children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Le,{sx:{fontSize:16,color:"#666"}}),e.jsx(t,{variant:"body2",children:n.teacher})]})}),e.jsx(s,{children:e.jsx(E,{label:`پایه ${n.grade}`,size:"small",color:"primary",variant:"outlined",sx:{fontWeight:600}})}),e.jsx(s,{children:e.jsxs(r,{sx:{display:"flex",flexDirection:"column",gap:.5},children:[e.jsx(E,{label:n.duplex?"پشت و رو":"یک طرف",size:"small",color:n.duplex?"secondary":"default"}),e.jsxs(t,{variant:"caption",children:["کاغذ ",n.paper_size]})]})}),e.jsx(s,{children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(xr,{sx:{fontSize:16,color:"#666"}}),e.jsx(t,{variant:"body2",children:tr(n.created_at)})]})}),e.jsx(s,{children:e.jsxs(r,{sx:{display:"flex",gap:1,justifyContent:"center"},children:[e.jsx(V,{title:"دانلود",children:e.jsx(H,{onClick:()=>Ze(n),sx:{backgroundColor:"#e3f2fd",color:"#1976d2","&:hover":{backgroundColor:"#1976d2",color:"white"}},children:e.jsx(ae,{})})}),e.jsx(V,{title:"حذف",children:e.jsx(H,{onClick:()=>er(n.id),sx:{backgroundColor:"#ffebee",color:"#f44336","&:hover":{backgroundColor:"#f44336",color:"white"}},children:e.jsx(Ce,{})})})]})})]},n.id))})]})}),De.length===0&&e.jsxs(r,{sx:{p:8,textAlign:"center"},children:[e.jsx(t,{variant:"h6",sx:{color:"#666",mb:2},children:"فایلی یافت نشد"}),e.jsx(t,{variant:"body2",color:"text.secondary",children:"هیچ فایلی با معیارهای جستجو مطابقت ندارد"})]})]})})]}),j==="analytics"&&e.jsxs(r,{children:[e.jsx(t,{variant:"h4",sx:{fontWeight:700,mb:4,color:"#1a237e"},children:"آمار و تحلیل سیستم"}),e.jsxs(D,{container:!0,spacing:3,sx:{mb:4},children:[e.jsx(D,{item:!0,xs:12,md:6,children:e.jsxs(S,{elevation:8,sx:{borderRadius:4,p:3,height:"400px",background:"rgba(255, 255, 255, 0.96)",backdropFilter:"blur(20px)",border:"1px solid rgba(0,0,0,0.05)"},children:[e.jsx(t,{variant:"h6",sx:{fontWeight:600,mb:2,color:"#1a237e"},children:"توزیع آپلودها بر اساس پایه"}),e.jsxs(r,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"300px"},children:[e.jsx(at,{sx:{fontSize:120,color:"#1976d2",opacity:.5}}),e.jsx(t,{variant:"body1",sx:{position:"absolute",color:"#666"},children:"نمودار آماری در آینده اضافه خواهد شد"})]})]})}),e.jsx(D,{item:!0,xs:12,md:6,children:e.jsxs(S,{elevation:8,sx:{borderRadius:4,p:3,height:"400px",background:"rgba(255, 255, 255, 0.96)",backdropFilter:"blur(20px)",border:"1px solid rgba(0,0,0,0.05)"},children:[e.jsx(t,{variant:"h6",sx:{fontWeight:600,mb:2,color:"#1a237e"},children:"روند آپلودها در طول زمان"}),e.jsxs(r,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"300px"},children:[e.jsx(lt,{sx:{fontSize:120,color:"#4caf50",opacity:.5}}),e.jsx(t,{variant:"body1",sx:{position:"absolute",color:"#666"},children:"نمودار روند در آینده اضافه خواهد شد"})]})]})})]}),e.jsxs(S,{elevation:8,sx:{borderRadius:4,p:3,background:"rgba(255, 255, 255, 0.96)",backdropFilter:"blur(20px)",border:"1px solid rgba(0,0,0,0.05)"},children:[e.jsx(t,{variant:"h6",sx:{fontWeight:600,mb:3,color:"#1a237e"},children:"آمار پیشرفته سیستم"}),e.jsxs(D,{container:!0,spacing:3,children:[e.jsx(D,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(r,{sx:{textAlign:"center",p:2,border:"1px solid #e0e0e0",borderRadius:2},children:[e.jsx(dt,{sx:{fontSize:40,color:"#ff9800",mb:1}}),e.jsx(t,{variant:"h4",sx:{fontWeight:700,color:"#ff9800"},children:i.filter(n=>new Date(n.created_at).toDateString()===new Date().toDateString()).length}),e.jsx(t,{variant:"body2",color:"text.secondary",children:"آپلودهای امروز"})]})}),e.jsx(D,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(r,{sx:{textAlign:"center",p:2,border:"1px solid #e0e0e0",borderRadius:2},children:[e.jsx(cr,{sx:{fontSize:40,color:"#4caf50",mb:1}}),e.jsx(t,{variant:"h4",sx:{fontWeight:700,color:"#4caf50"},children:Math.round(i.length/Math.max((o==null?void 0:o.total_teachers)||1,1)*10)/10}),e.jsx(t,{variant:"body2",color:"text.secondary",children:"میانگین آپلود per معلم"})]})}),e.jsx(D,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(r,{sx:{textAlign:"center",p:2,border:"1px solid #e0e0e0",borderRadius:2},children:[e.jsx(Te,{sx:{fontSize:40,color:"#9c27b0",mb:1}}),e.jsxs(t,{variant:"h4",sx:{fontWeight:700,color:"#9c27b0"},children:[(Ae/Math.max(i.length,1)).toFixed(1)," MB"]}),e.jsx(t,{variant:"body2",color:"text.secondary",children:"حجم متوسط فایل"})]})}),e.jsx(D,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(r,{sx:{textAlign:"center",p:2,border:"1px solid #e0e0e0",borderRadius:2},children:[e.jsx(ct,{sx:{fontSize:40,color:"#f44336",mb:1}}),e.jsx(t,{variant:"h4",sx:{fontWeight:700,color:"#f44336"},children:I.length}),e.jsx(t,{variant:"body2",color:"text.secondary",children:"کل فعالیت‌ها"})]})})]})]})]}),j==="teachers"&&e.jsxs(S,{elevation:8,sx:{borderRadius:4,p:3,background:"rgba(255, 255, 255, 0.96)",backdropFilter:"blur(20px)",border:"1px solid rgba(0,0,0,0.05)"},children:[e.jsxs(r,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[e.jsx(t,{variant:"h5",sx:{fontWeight:700,color:"#1a237e"},children:"مدیریت معلم‌ها"}),e.jsxs(r,{sx:{display:"flex",gap:2},children:[e.jsx(m,{variant:"contained",startIcon:e.jsx(hr,{}),sx:{borderRadius:3,fontWeight:600,background:"linear-gradient(135deg, #4caf50 0%, #66bb6a 100%)","&:hover":{background:"linear-gradient(135deg, #388e3c 0%, #4caf50 100%)"}},children:"افزودن معلم جدید"}),e.jsx(m,{variant:"outlined",startIcon:e.jsx(ae,{}),sx:{borderRadius:3,fontWeight:600,borderColor:"#1976d2",color:"#1976d2","&:hover":{backgroundColor:"#f3f9ff",borderColor:"#1565c0"}},children:"خروجی Excel"})]})]}),e.jsxs(r,{sx:{display:"flex",gap:2,mb:3,flexWrap:"wrap"},children:[e.jsx(N,{placeholder:"جستجو بر اساس نام یا شماره تماس...",value:T,onChange:n=>P(n.target.value),InputProps:{startAdornment:e.jsx(ee,{position:"start",children:e.jsx(He,{sx:{color:"#666"}})})},sx:{minWidth:300,"& .MuiOutlinedInput-root":{borderRadius:3}}}),e.jsxs(N,{select:!0,label:"فیلتر پایه",value:G,onChange:n=>pe(n.target.value),sx:{minWidth:120,"& .MuiOutlinedInput-root":{borderRadius:3}},children:[e.jsx(Z,{value:"",children:"همه پایه‌ها"}),[1,2,3,4,5,6,7].map(n=>e.jsxs(Z,{value:n,children:["پایه ",n]},n))]}),e.jsx(m,{variant:"outlined",onClick:me,startIcon:e.jsx(de,{}),sx:{borderRadius:3,fontWeight:600,borderColor:"#1a237e",color:"#1a237e","&:hover":{backgroundColor:"#1a237e",color:"white"}},children:"بروزرسانی"})]}),e.jsx(ce,{children:e.jsxs(xe,{children:[e.jsx(he,{children:e.jsxs(J,{sx:{backgroundColor:"#f8f9fa"},children:[e.jsx(s,{sx:{fontWeight:700,fontSize:"1rem"},children:"شناسه"}),e.jsx(s,{sx:{fontWeight:700,fontSize:"1rem"},children:"نام"}),e.jsx(s,{sx:{fontWeight:700,fontSize:"1rem"},children:"شماره تماس"}),e.jsx(s,{sx:{fontWeight:700,fontSize:"1rem"},children:"پایه"}),e.jsx(s,{sx:{fontWeight:700,fontSize:"1rem"},children:"وضعیت"}),e.jsx(s,{sx:{fontWeight:700,fontSize:"1rem"},children:"تاریخ عضویت"}),e.jsx(s,{sx:{fontWeight:700,fontSize:"1rem",textAlign:"center"},children:"عملیات"})]})}),e.jsx(fe,{children:k.filter(n=>n.name.toLowerCase().includes(T.toLowerCase())||n.phone.includes(T)).filter(n=>!G||n.grade===parseInt(G)).map(n=>e.jsxs(J,{sx:{"&:hover":{backgroundColor:"#f8f9fa"}},children:[e.jsxs(s,{sx:{fontWeight:600,color:"#666"},children:["#",n.id]}),e.jsx(s,{children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(Oe,{sx:{width:32,height:32,backgroundColor:"#1976d2",fontSize:"0.9rem",fontWeight:600},children:n.name.charAt(0)}),e.jsx(t,{variant:"body1",sx:{fontWeight:600},children:n.name})]})}),e.jsx(s,{children:e.jsx(t,{variant:"body2",sx:{fontFamily:"monospace"},children:n.phone})}),e.jsx(s,{children:e.jsx(E,{label:`پایه ${n.grade}`,size:"small",color:"primary",variant:"outlined",sx:{fontWeight:600}})}),e.jsx(s,{children:e.jsx(E,{label:n.is_active?"فعال":"غیرفعال",color:n.is_active?"success":"error",size:"small",sx:{fontWeight:600}})}),e.jsx(s,{children:e.jsx(t,{variant:"body2",color:"text.secondary",children:new Date(n.created_at).toLocaleDateString("fa-IR")})}),e.jsx(s,{children:e.jsxs(r,{sx:{display:"flex",gap:1,justifyContent:"center"},children:[e.jsx(V,{title:"ویرایش",children:e.jsx(H,{size:"small",sx:{backgroundColor:"#e3f2fd",color:"#1976d2","&:hover":{backgroundColor:"#1976d2",color:"white"}},children:e.jsx(Je,{fontSize:"small"})})}),e.jsx(V,{title:"حذف",children:e.jsx(H,{size:"small",onClick:()=>{A(n),re(!0)},sx:{backgroundColor:"#ffebee",color:"#f44336","&:hover":{backgroundColor:"#f44336",color:"white"}},children:e.jsx(Ce,{fontSize:"small"})})})]})})]},n.id))})]})}),k.length===0&&e.jsxs(r,{sx:{p:8,textAlign:"center"},children:[e.jsx(t,{variant:"h6",sx:{color:"#666",mb:2},children:"هیچ معلمی یافت نشد"}),e.jsx(t,{variant:"body2",color:"text.secondary",children:"هنوز هیچ معلمی در سیستم ثبت نشده است"})]})]}),j==="admins"&&e.jsxs(S,{elevation:8,sx:{borderRadius:4,p:3,background:"rgba(255, 255, 255, 0.96)",backdropFilter:"blur(20px)",border:"1px solid rgba(0,0,0,0.05)"},children:[e.jsxs(r,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[e.jsx(t,{variant:"h5",sx:{fontWeight:700,color:"#1a237e"},children:"مدیریت مدیران سیستم"}),e.jsxs(r,{sx:{display:"flex",gap:2},children:[e.jsx(m,{variant:"contained",startIcon:e.jsx(hr,{}),sx:{borderRadius:3,fontWeight:600,background:"linear-gradient(135deg, #9c27b0 0%, #ba68c8 100%)","&:hover":{background:"linear-gradient(135deg, #7b1fa2 0%, #9c27b0 100%)"}},children:"افزودن مدیر جدید"}),e.jsx(m,{variant:"outlined",startIcon:e.jsx(ae,{}),sx:{borderRadius:3,fontWeight:600,borderColor:"#9c27b0",color:"#9c27b0","&:hover":{backgroundColor:"#f3e5f5",borderColor:"#7b1fa2"}},children:"خروجی Excel"})]})]}),e.jsx(ce,{children:e.jsxs(xe,{children:[e.jsx(he,{children:e.jsxs(J,{sx:{backgroundColor:"#f8f9fa"},children:[e.jsx(s,{sx:{fontWeight:700,fontSize:"1rem"},children:"شناسه"}),e.jsx(s,{sx:{fontWeight:700,fontSize:"1rem"},children:"شماره تماس"}),e.jsx(s,{sx:{fontWeight:700,fontSize:"1rem"},children:"نام کامل"}),e.jsx(s,{sx:{fontWeight:700,fontSize:"1rem"},children:"ایمیل"}),e.jsx(s,{sx:{fontWeight:700,fontSize:"1rem"},children:"وضعیت"}),e.jsx(s,{sx:{fontWeight:700,fontSize:"1rem"},children:"آخرین ورود"}),e.jsx(s,{sx:{fontWeight:700,fontSize:"1rem",textAlign:"center"},children:"عملیات"})]})}),e.jsx(fe,{children:M.map(n=>e.jsxs(J,{sx:{"&:hover":{backgroundColor:"#f8f9fa"}},children:[e.jsxs(s,{sx:{fontWeight:600,color:"#666"},children:["#",n.id]}),e.jsx(s,{children:e.jsx(t,{variant:"body2",sx:{fontFamily:"monospace"},children:n.phone})}),e.jsx(s,{children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(Oe,{sx:{width:32,height:32,backgroundColor:"#9c27b0",fontSize:"0.9rem",fontWeight:600},children:n.full_name.charAt(0)}),e.jsx(t,{variant:"body1",sx:{fontWeight:600},children:n.full_name})]})}),e.jsx(s,{children:e.jsx(t,{variant:"body2",color:"text.secondary",children:n.email})}),e.jsx(s,{children:e.jsx(E,{label:n.is_active?"فعال":"غیرفعال",color:n.is_active?"success":"error",size:"small",sx:{fontWeight:600}})}),e.jsx(s,{children:e.jsx(t,{variant:"body2",color:"text.secondary",children:n.last_login||"هرگز"})}),e.jsx(s,{children:e.jsxs(r,{sx:{display:"flex",gap:1,justifyContent:"center"},children:[e.jsx(V,{title:"ویرایش",children:e.jsx(H,{size:"small",sx:{backgroundColor:"#f3e5f5",color:"#9c27b0","&:hover":{backgroundColor:"#9c27b0",color:"white"}},children:e.jsx(Je,{fontSize:"small"})})}),e.jsx(V,{title:"حذف",children:e.jsx(H,{size:"small",sx:{backgroundColor:"#fce4ec",color:"#e91e63","&:hover":{backgroundColor:"#e91e63",color:"white"}},children:e.jsx(Ce,{fontSize:"small"})})})]})})]},n.id))})]})}),M.length===0&&e.jsxs(r,{sx:{p:8,textAlign:"center"},children:[e.jsx(t,{variant:"h6",sx:{color:"#666",mb:2},children:"هیچ مدیری یافت نشد"}),e.jsx(t,{variant:"body2",color:"text.secondary",children:"هنوز هیچ مدیری در سیستم ثبت نشده است"})]})]}),j==="settings"&&e.jsxs(r,{children:[e.jsx(t,{variant:"h4",sx:{fontWeight:700,mb:4,color:"#1a237e"},children:"تنظیمات سیستم"}),e.jsxs(D,{container:!0,spacing:3,children:[e.jsx(D,{item:!0,xs:12,md:6,children:e.jsxs(S,{elevation:8,sx:{borderRadius:4,p:3,background:"rgba(255, 255, 255, 0.96)",backdropFilter:"blur(20px)",border:"1px solid rgba(0,0,0,0.05)"},children:[e.jsx(t,{variant:"h6",sx:{fontWeight:600,mb:3,color:"#1a237e"},children:"تنظیمات عمومی"}),e.jsxs(r,{sx:{display:"flex",flexDirection:"column",gap:3},children:[e.jsx(N,{label:"حداکثر حجم فایل (MB)",type:"number",defaultValue:Q.maxFileSize,fullWidth:!0,sx:{"& .MuiOutlinedInput-root":{borderRadius:3}}}),e.jsx(N,{label:"پسوندهای مجاز",defaultValue:Q.allowedExtensions.join(", "),fullWidth:!0,sx:{"& .MuiOutlinedInput-root":{borderRadius:3}}}),e.jsx(xt,{control:e.jsx(ht,{defaultChecked:!Q.maintenanceMode}),label:"حالت نگهداری"})]})]})}),e.jsx(D,{item:!0,xs:12,md:6,children:e.jsxs(S,{elevation:8,sx:{borderRadius:4,p:3,background:"rgba(255, 255, 255, 0.96)",backdropFilter:"blur(20px)",border:"1px solid rgba(0,0,0,0.05)"},children:[e.jsx(t,{variant:"h6",sx:{fontWeight:600,mb:3,color:"#1a237e"},children:"تنظیمات پشتیبان‌گیری"}),e.jsxs(r,{sx:{display:"flex",flexDirection:"column",gap:3},children:[e.jsxs(N,{select:!0,label:"فرکانس پشتیبان‌گیری",defaultValue:Q.backupFrequency,fullWidth:!0,sx:{"& .MuiOutlinedInput-root":{borderRadius:3}},children:[e.jsx(Z,{value:"daily",children:"روزانه"}),e.jsx(Z,{value:"weekly",children:"هفتگی"}),e.jsx(Z,{value:"monthly",children:"ماهانه"})]}),e.jsx(m,{variant:"contained",startIcon:e.jsx(fr,{}),sx:{borderRadius:3,fontWeight:600,background:"linear-gradient(135deg, #ff9800 0%, #ffb74d 100%)","&:hover":{background:"linear-gradient(135deg, #f57c00 0%, #ff9800 100%)"}},children:"پشتیبان‌گیری فوری"})]})]})})]})]}),j==="database"&&e.jsxs(r,{children:[e.jsx(t,{variant:"h4",sx:{fontWeight:700,mb:4,color:"#1a237e"},children:"مدیریت پایگاه داده"}),e.jsxs(D,{container:!0,spacing:3,children:[e.jsx(D,{item:!0,xs:12,md:6,children:e.jsxs(S,{elevation:8,sx:{borderRadius:4,p:3,background:"rgba(255, 255, 255, 0.96)",backdropFilter:"blur(20px)",border:"1px solid rgba(0,0,0,0.05)"},children:[e.jsx(t,{variant:"h6",sx:{fontWeight:600,mb:3,color:"#1a237e"},children:"آمار پایگاه داده"}),e.jsxs(r,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsxs(r,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(t,{variant:"body2",children:"کل معلم‌ها:"}),e.jsx(t,{variant:"body2",sx:{fontWeight:600},children:(o==null?void 0:o.total_teachers)||0})]}),e.jsxs(r,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(t,{variant:"body2",children:"کل آپلودها:"}),e.jsx(t,{variant:"body2",sx:{fontWeight:600},children:(o==null?void 0:o.total_uploads)||0})]}),e.jsxs(r,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(t,{variant:"body2",children:"کل فعالیت‌ها:"}),e.jsx(t,{variant:"body2",sx:{fontWeight:600},children:I.length})]}),e.jsxs(r,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(t,{variant:"body2",children:"کل مدیران:"}),e.jsx(t,{variant:"body2",sx:{fontWeight:600},children:M.length})]})]})]})}),e.jsx(D,{item:!0,xs:12,md:6,children:e.jsxs(S,{elevation:8,sx:{borderRadius:4,p:3,background:"rgba(255, 255, 255, 0.96)",backdropFilter:"blur(20px)",border:"1px solid rgba(0,0,0,0.05)"},children:[e.jsx(t,{variant:"h6",sx:{fontWeight:600,mb:3,color:"#1a237e"},children:"عملیات پایگاه داده"}),e.jsxs(r,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsx(m,{variant:"outlined",startIcon:e.jsx(fr,{}),sx:{borderRadius:3,fontWeight:600,borderColor:"#4caf50",color:"#4caf50","&:hover":{backgroundColor:"#e8f5e8",borderColor:"#388e3c"}},children:"پشتیبان‌گیری از داده‌ها"}),e.jsx(m,{variant:"outlined",startIcon:e.jsx(de,{}),sx:{borderRadius:3,fontWeight:600,borderColor:"#2196f3",color:"#2196f3","&:hover":{backgroundColor:"#e3f2fd",borderColor:"#1976d2"}},children:"بهینه‌سازی پایگاه داده"}),e.jsx(m,{variant:"outlined",startIcon:e.jsx(Te,{}),color:"warning",sx:{borderRadius:3,fontWeight:600},children:"بازسازی ایندکس‌ها"})]})]})})]})]}),j==="logs"&&e.jsxs(S,{elevation:8,sx:{borderRadius:4,p:3,background:"rgba(255, 255, 255, 0.96)",backdropFilter:"blur(20px)",border:"1px solid rgba(0,0,0,0.05)"},children:[e.jsxs(r,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[e.jsx(t,{variant:"h5",sx:{fontWeight:700,color:"#1a237e"},children:"گزارش فعالیت‌های سیستم"}),e.jsxs(r,{sx:{display:"flex",gap:2},children:[e.jsx(m,{variant:"outlined",startIcon:e.jsx(ae,{}),sx:{borderRadius:3,fontWeight:600,borderColor:"#1a237e",color:"#1a237e","&:hover":{backgroundColor:"#1a237e",color:"white"}},children:"خروجی گزارش"}),e.jsx(m,{variant:"outlined",startIcon:e.jsx(de,{}),onClick:me,sx:{borderRadius:3,fontWeight:600,borderColor:"#1a237e",color:"#1a237e","&:hover":{backgroundColor:"#1a237e",color:"white"}},children:"بروزرسانی"})]})]}),e.jsx(ce,{children:e.jsxs(xe,{children:[e.jsx(he,{children:e.jsxs(J,{sx:{backgroundColor:"#f8f9fa"},children:[e.jsx(s,{sx:{fontWeight:700,fontSize:"1rem"},children:"شناسه"}),e.jsx(s,{sx:{fontWeight:700,fontSize:"1rem"},children:"کاربر"}),e.jsx(s,{sx:{fontWeight:700,fontSize:"1rem"},children:"نوع فعالیت"}),e.jsx(s,{sx:{fontWeight:700,fontSize:"1rem"},children:"توضیحات"}),e.jsx(s,{sx:{fontWeight:700,fontSize:"1rem"},children:"آدرس IP"}),e.jsx(s,{sx:{fontWeight:700,fontSize:"1rem"},children:"تاریخ"})]})}),e.jsx(fe,{children:I.slice(0,50).map(n=>e.jsxs(J,{sx:{"&:hover":{backgroundColor:"#f8f9fa"}},children:[e.jsxs(s,{sx:{fontWeight:600,color:"#666"},children:["#",n.id]}),e.jsx(s,{children:e.jsx(t,{variant:"body2",sx:{fontWeight:600},children:n.teacher_name})}),e.jsx(s,{children:e.jsx(E,{label:n.action,size:"small",color:n.action==="login"?"success":n.action==="upload"?"primary":n.action==="delete"?"error":"default",sx:{fontWeight:600,fontSize:"0.75rem"}})}),e.jsx(s,{children:e.jsx(t,{variant:"body2",children:n.description})}),e.jsx(s,{children:e.jsx(t,{variant:"body2",sx:{fontFamily:"monospace",fontSize:"0.8rem"},children:n.ip_address})}),e.jsx(s,{children:e.jsx(t,{variant:"body2",color:"text.secondary",children:n.created_at})})]},n.id))})]})}),I.length===0&&e.jsxs(r,{sx:{p:8,textAlign:"center"},children:[e.jsx(t,{variant:"h6",sx:{color:"#666",mb:2},children:"هیچ فعالیتی یافت نشد"}),e.jsx(t,{variant:"body2",color:"text.secondary",children:"هنوز هیچ فعالیتی در سیستم ثبت نشده است"})]})]}),j==="files"&&e.jsxs(e.Fragment,{children:[e.jsx(S,{elevation:8,sx:{borderRadius:4,p:3,mb:3,background:"rgba(255, 255, 255, 0.96)",backdropFilter:"blur(20px)",border:"1px solid rgba(0,0,0,0.05)"},children:e.jsxs(r,{sx:{display:"flex",gap:2,flexWrap:"wrap",alignItems:"center"},children:[e.jsx(N,{placeholder:"جستجو در فایل‌ها...",value:T,onChange:n=>P(n.target.value),InputProps:{startAdornment:e.jsx(ee,{position:u?"end":"start",children:e.jsx(He,{sx:{color:"#666"}})})},sx:{maxWidth:400,"& .MuiOutlinedInput-root":{borderRadius:3}}}),e.jsx(m,{variant:"outlined",onClick:me,startIcon:e.jsx(de,{}),sx:{borderRadius:3,fontWeight:600,borderColor:"#1a237e",color:"#1a237e","&:hover":{backgroundColor:"#1a237e",color:"white"}},children:"بروزرسانی"})]})}),e.jsx(S,{elevation:8,sx:{borderRadius:4,overflow:"hidden",background:"rgba(255, 255, 255, 0.96)",backdropFilter:"blur(20px)",border:"1px solid rgba(0,0,0,0.05)"},children:e.jsxs(K,{sx:{p:3},children:[e.jsx(t,{variant:"h5",sx:{fontWeight:700,mb:3,color:"#1a237e"},children:"تمام آپلودهای سیستم"}),e.jsx(ce,{children:e.jsxs(xe,{children:[e.jsx(he,{children:e.jsxs(J,{sx:{backgroundColor:"#f8f9fa"},children:[e.jsx(s,{sx:{fontWeight:700,fontSize:"1rem"},children:"فایل"}),e.jsx(s,{sx:{fontWeight:700,fontSize:"1rem"},children:"معلم"}),e.jsx(s,{sx:{fontWeight:700,fontSize:"1rem"},children:"پایه"}),e.jsx(s,{sx:{fontWeight:700,fontSize:"1rem"},children:"تنظیمات"}),e.jsx(s,{sx:{fontWeight:700,fontSize:"1rem"},children:"تاریخ"}),e.jsx(s,{sx:{fontWeight:700,fontSize:"1rem",textAlign:"center"},children:"عملیات"})]})}),e.jsx(fe,{children:De.map(n=>e.jsxs(J,{sx:{"&:hover":{backgroundColor:"#f8f9fa"}},children:[e.jsx(s,{children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(r,{sx:{width:40,height:40,borderRadius:"8px",background:"linear-gradient(135deg, #1976d2 0%, #42a5f5 100%)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(_e,{sx:{fontSize:20,color:"white"}})}),e.jsx(t,{variant:"body1",sx:{fontWeight:600},children:n.filename})]})}),e.jsx(s,{children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Le,{sx:{fontSize:16,color:"#666"}}),e.jsx(t,{variant:"body2",children:n.teacher})]})}),e.jsx(s,{children:e.jsx(E,{label:`پایه ${n.grade}`,size:"small",color:"primary",variant:"outlined",sx:{fontWeight:600}})}),e.jsx(s,{children:e.jsxs(r,{sx:{display:"flex",flexDirection:"column",gap:.5},children:[e.jsx(E,{label:n.duplex?"پشت و رو":"یک طرف",size:"small",color:n.duplex?"secondary":"default"}),e.jsxs(t,{variant:"caption",children:["کاغذ ",n.paper_size]})]})}),e.jsx(s,{children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(xr,{sx:{fontSize:16,color:"#666"}}),e.jsx(t,{variant:"body2",children:tr(n.created_at)})]})}),e.jsx(s,{children:e.jsxs(r,{sx:{display:"flex",gap:1,justifyContent:"center"},children:[e.jsx(V,{title:"دانلود",children:e.jsx(H,{onClick:()=>Ze(n),sx:{backgroundColor:"#e3f2fd",color:"#1976d2","&:hover":{backgroundColor:"#1976d2",color:"white"}},children:e.jsx(ae,{})})}),e.jsx(V,{title:"حذف",children:e.jsx(H,{onClick:()=>er(n.id),sx:{backgroundColor:"#ffebee",color:"#f44336","&:hover":{backgroundColor:"#f44336",color:"white"}},children:e.jsx(Ce,{})})})]})})]},n.id))})]})}),De.length===0&&e.jsxs(r,{sx:{p:8,textAlign:"center"},children:[e.jsx(t,{variant:"h6",sx:{color:"#666",mb:2},children:"فایلی یافت نشد"}),e.jsx(t,{variant:"body2",color:"text.secondary",children:"هیچ فایلی با معیارهای جستجو مطابقت ندارد"})]})]})})]})]})]}),e.jsxs(mr,{open:be,onClose:()=>re(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsx(vr,{sx:{fontWeight:700,fontSize:"1.25rem"},children:"تایید حذف معلم"}),e.jsx(yr,{children:e.jsxs(t,{variant:"body1",children:["آیا مطمئن هستید که می‌خواهید معلم ",e.jsx("strong",{children:c==null?void 0:c.name})," را حذف کنید؟",e.jsx("br",{}),"تمام فایل‌های این معلم نیز حذف خواهند شد."]})}),e.jsxs(Sr,{children:[e.jsx(m,{onClick:()=>re(!1),sx:{fontWeight:600},children:"لغو"}),e.jsx(m,{onClick:()=>Ar(c==null?void 0:c.id),variant:"contained",color:"error",sx:{fontWeight:600},children:"حذف"})]})]}),e.jsx(kr,{open:W.open,autoHideDuration:6e3,onClose:rr,anchorOrigin:{vertical:"top",horizontal:"center"},children:e.jsx(We,{onClose:rr,severity:W.severity,sx:{width:"100%",fontSize:"1rem"},children:W.message})})]})}function Ft(){const[l,a]=d.useState(null),[h,g]=d.useState(null),[u,o]=d.useState(!1),[p,i]=d.useState("login"),[b,k]=d.useState(!0),w=f=>{f?L.defaults.headers.common.Authorization=`Bearer ${f}`:delete L.defaults.headers.common.Authorization};d.useEffect(()=>{const f=localStorage.getItem("authToken"),R=localStorage.getItem("authRole"),v=localStorage.getItem("user"),y=localStorage.getItem("adminProfile");if(f&&R){if(w(f),R==="admin"&&y){try{const j=JSON.parse(y);g(j)}catch(j){console.error("Failed to parse admin profile:",j),localStorage.removeItem("adminProfile")}o(!0),i("admin-dashboard")}else if(R==="teacher"&&v)try{const j=JSON.parse(v);a(j),i("upload")}catch(j){console.error("Failed to parse user profile:",j),localStorage.removeItem("user")}}else if(localStorage.getItem("adminAccess")==="true"&&y){try{const O=JSON.parse(y);g(O)}catch(O){console.error("Failed to parse admin profile:",O),localStorage.removeItem("adminProfile")}o(!0),i("admin-dashboard")}else if(v)try{const O=JSON.parse(v);a(O),i("upload")}catch(O){console.error("Failed to parse user profile:",O),localStorage.removeItem("user")}k(!1)},[]);const M=f=>{!f||!f.token||!f.role||(w(f.token),localStorage.setItem("authToken",f.token),localStorage.setItem("authRole",f.role),f.role==="teacher"&&f.teacher?(a(f.teacher),g(null),o(!1),localStorage.setItem("user",JSON.stringify(f.teacher)),localStorage.removeItem("adminProfile"),localStorage.removeItem("adminAccess"),i("upload")):f.role==="admin"&&f.admin&&(a(null),g(f.admin),o(!0),localStorage.setItem("adminProfile",JSON.stringify(f.admin)),localStorage.setItem("adminAccess","true"),localStorage.removeItem("user"),i("admin-dashboard")))},z=f=>{M(f)},I=()=>{w(null),a(null),g(null),o(!1),localStorage.removeItem("authToken"),localStorage.removeItem("authRole"),localStorage.removeItem("user"),localStorage.removeItem("adminProfile"),localStorage.removeItem("adminAccess"),i("login")},Y=()=>{switch(p){case"login":return e.jsxs(r,{children:[e.jsx(St,{onLogin:M}),e.jsx(r,{sx:{position:"fixed",bottom:32,left:32,zIndex:1e3,display:{xs:"none",md:"block"}},children:e.jsxs(r,{component:"button",onClick:()=>i("admin-login"),sx:{background:"linear-gradient(135deg, #dc004e 0%, #ff5983 100%)",color:"white",border:"none",borderRadius:"50px",padding:"16px 24px",fontSize:"0.95rem",fontWeight:600,cursor:"pointer",boxShadow:"0 8px 32px rgba(220, 0, 78, 0.4)",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{transform:"translateY(-4px)",boxShadow:"0 12px 40px rgba(220, 0, 78, 0.5)"},"&:active":{transform:"translateY(-2px)"}},children:[e.jsx(le,{sx:{fontSize:20}}),"ورود به پنل مدیریت"]})}),e.jsx(r,{sx:{position:"fixed",bottom:20,left:20,zIndex:1e3,display:{xs:"block",md:"none"}},children:e.jsx(r,{component:"button",onClick:()=>i("admin-login"),sx:{background:"linear-gradient(135deg, #dc004e 0%, #ff5983 100%)",color:"white",border:"none",borderRadius:"50%",width:"56px",height:"56px",cursor:"pointer",boxShadow:"0 6px 20px rgba(220, 0, 78, 0.4)",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{transform:"scale(1.1)",boxShadow:"0 8px 25px rgba(220, 0, 78, 0.5)"}},children:e.jsx(le,{sx:{fontSize:24}})})})]});case"admin-login":return e.jsx(Rt,{onAdminLogin:z});case"admin-dashboard":return e.jsx(Dt,{onLogout:I,adminProfile:h});case"upload":return e.jsx(wt,{user:l,onNavigate:i,onLogout:I});case"myfiles":return e.jsx(Wt,{user:l,onNavigate:i,onLogout:I});default:return e.jsx(r,{sx:{minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"24px",background:"linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)",textAlign:"center"},children:e.jsxs(r,{sx:{maxWidth:"600px",width:"100%",backgroundColor:"white",borderRadius:"24px",padding:"48px 32px",boxShadow:"0 20px 60px rgba(0,0,0,0.1)",border:"1px solid rgba(0,0,0,0.05)"},children:[e.jsx(r,{sx:{width:"120px",height:"120px",borderRadius:"50%",background:"linear-gradient(135deg, #1976d2 0%, #42a5f5 100%)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 32px auto",boxShadow:"0 12px 40px rgba(25, 118, 210, 0.3)"},children:e.jsx(ge,{sx:{fontSize:60,color:"white"}})}),e.jsx(t,{variant:"h3",component:"h1",sx:{fontWeight:700,color:"#1976d2",mb:2,fontSize:{xs:"2rem",sm:"2.5rem",md:"3rem"},lineHeight:1.2},children:"سیستم آپلود فایل معلم"}),e.jsx(t,{variant:"h6",sx:{color:"#666",mb:4,fontSize:{xs:"1rem",sm:"1.1rem"},lineHeight:1.6},children:"سیستم حرفه‌ای و مدرن برای مدیریت فایل‌های آموزشی"}),e.jsxs(r,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},gap:"16px",justifyContent:"center",alignItems:"center"},children:[e.jsxs(r,{component:"button",onClick:()=>i("login"),sx:{background:"linear-gradient(135deg, #1976d2 0%, #42a5f5 100%)",color:"white",border:"none",borderRadius:"16px",padding:"16px 32px",fontSize:"1.1rem",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",boxShadow:"0 8px 32px rgba(25, 118, 210, 0.3)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",minWidth:"200px","&:hover":{transform:"translateY(-2px)",boxShadow:"0 12px 40px rgba(25, 118, 210, 0.4)"},"&:active":{transform:"translateY(0)"}},children:[e.jsx(ge,{sx:{fontSize:20}}),"ورود معلم"]}),e.jsxs(r,{component:"button",onClick:()=>i("admin-login"),sx:{background:"white",color:"#dc004e",border:"2px solid #dc004e",borderRadius:"16px",padding:"14px 32px",fontSize:"1.1rem",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",minWidth:"200px","&:hover":{backgroundColor:"#dc004e",color:"white",transform:"translateY(-2px)",boxShadow:"0 8px 24px rgba(220, 0, 78, 0.3)"},"&:active":{transform:"translateY(0)"}},children:[e.jsx(le,{sx:{fontSize:20}}),"ورود مدیر"]})]})]})})}};return b?e.jsx(ur,{children:e.jsx(r,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",background:"linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)"},children:e.jsxs(r,{sx:{textAlign:"center",backgroundColor:"white",padding:"48px 32px",borderRadius:"24px",boxShadow:"0 20px 60px rgba(0,0,0,0.1)",border:"1px solid rgba(0,0,0,0.05)"},children:[e.jsxs(r,{sx:{position:"relative",display:"inline-block",mb:3},children:[e.jsx(ue,{size:60,sx:{color:"#1976d2"}}),e.jsx(r,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"30px",height:"30px",borderRadius:"50%",background:"linear-gradient(135deg, #1976d2 0%, #42a5f5 100%)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(ge,{sx:{fontSize:16,color:"white"}})})]}),e.jsx(t,{variant:"h6",sx:{color:"#666",fontWeight:500},children:"در حال بارگذاری سیستم..."})]})})}):e.jsx(ur,{children:e.jsx(r,{sx:{minHeight:"100vh",backgroundColor:"#fafafa"},children:Y()})})}Ke.createRoot(document.getElementById("root")).render(e.jsx(Wr.StrictMode,{children:e.jsx(Ft,{})}));
